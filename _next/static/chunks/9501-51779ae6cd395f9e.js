"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9501],{29501:function(e,i,t){t.d(i,{Z:function(){return P}});var l=t(85893),n=t(67294),a=t(9198),s=t.n(a),o=t(11163),d=t(85945),r=t(27484),u=t.n(r),c=t(79878),m=t(86874),p=t(74368),f=t(81820),v=t(11750),h=t(66476),x=t(69417),D=t(66242),j=t(44267),T=t(78445),Z=t(69368),C=t(8168),_=t(53457),b=t(86886),g=t(93946),M=t(67739),I=t(87109);let E=e=>{let{label:i,value:t,onChange:n,fileId:a="file1"}=e,s=()=>{document.getElementById(a).value="",n(null)};return(0,l.jsxs)(b.ZP,{item:!0,container:!0,spacing:5,alignItems:"flex-end",children:[(0,l.jsx)(b.ZP,{item:!0,xs:6,row:!0,children:(0,l.jsx)(h.Z,{fullWidth:!0,disabled:!0,type:"text",label:i,value:(null==t?void 0:t.name)||"",sx:{"& .MuiInputBase-root.Mui-disabled":{backgroundColor:"transparent !important"}},InputProps:{...(null==t?void 0:t.name)&&{endAdornment:(0,l.jsx)(I.Z,{position:"end",children:(0,l.jsx)(g.Z,{edge:"end",onClick:s,children:(0,l.jsx)(c.Z,{fontSize:"1.25rem",icon:"ic:baseline-clear"})})})}}})}),(0,l.jsx)(b.ZP,{item:!0,xs:4,row:!0,children:(0,l.jsxs)(x.Z,{variant:"contained",color:"success",component:"label",children:["ファイル選択",(0,l.jsx)("input",{type:"file",hidden:!0,onChange:n,id:a})]})})]})},y=(e,i,t)=>{let l={file1:1,file2:2,file3:3},n=null==t?void 0:t.find(i=>(null==i?void 0:i.position)==(null==l?void 0:l[e])),a=!!n&&!!(null==i?void 0:i.id),s=!!n&&!(null==i?void 0:i.id);return a?{id:null==n?void 0:n.id,position:null==n?void 0:n.position}:s&&i?{id:null==n?void 0:n.id,file:i,position:null==l?void 0:l[e]}:n&&!i?null:!n&&i?{file:i,position:null==l?void 0:l[e]}:void 0},N=e=>{let{id:i,defaultValue:t,docs:a}=e,r=(0,o.useRouter)(),I=(0,d.NL)(),[N,P]=(0,n.useState)(null!=t?t:{status:"PRIVATE"}),{mutate:O}=(0,v.w4)(),{mutate:w}=(0,v.k4)(i),S=e=>i=>{var t,l,n,a,s,o,d;let r={date:i,file1:null==i?void 0:null===(t=i.target)||void 0===t?void 0:null===(l=t.files)||void 0===l?void 0:l[0],file2:null==i?void 0:null===(n=i.target)||void 0===n?void 0:null===(a=n.files)||void 0===a?void 0:a[0],file3:null==i?void 0:null===(s=i.target)||void 0===s?void 0:null===(o=s.files)||void 0===o?void 0:o[0]},u=[...Object.keys(r)].find(i=>e.includes(i)),c=u?r[e]:null==i?void 0:null===(d=i.target)||void 0===d?void 0:d.value;P({...N,[e]:c})},A=e=>{e.preventDefault();let{subject:t,content:l,date:n,status:s,file1:o,file2:d,file3:c}=N,m=[y("file1",o,a),y("file2",d,a),y("file3",c,a)].filter(e=>e),p=new FormData;p.append("subject",t),p.append("content",l),p.append("date",u()(n).format("YYYY-MM-DD")),p.append("status",s),m.forEach((e,i)=>{e.id&&p.append("docs[".concat(i,"].id"),e.id),e.position&&p.append("docs[".concat(i,"].position"),e.position),e.file&&p.append("docs[".concat(i,"].file"),e.file)}),(i?w:O)(p,{onSuccess:()=>{I.removeQueries(f.Z.adminBulletins._def),r.push("/bulletins")}})};return(0,l.jsxs)(D.Z,{children:[(0,l.jsx)(T.Z,{title:"掲示板管理/詳細画面"}),(0,l.jsx)(j.Z,{children:(0,l.jsx)("form",{onSubmit:A,children:(0,l.jsxs)(b.ZP,{container:!0,spacing:5,children:[(0,l.jsx)(b.ZP,{item:!0,xs:12,children:(0,l.jsx)(_.Z,{row:!0,value:null==N?void 0:N.status,"aria-label":"status",name:"status",onChange:S("status"),children:null===p.sl||void 0===p.sl?void 0:p.sl.map((e,i)=>(0,l.jsx)(C.Z,{label:p.Wd[e],value:e,control:(0,l.jsx)(Z.Z,{checked:e==(null==N?void 0:N.status)})},i))})}),(0,l.jsx)(b.ZP,{item:!0,xs:3,children:(0,l.jsx)(m.Z,{children:(0,l.jsx)(s(),{isClearable:!0,selected:null==N?void 0:N.date,showYearDropdown:!0,showMonthDropdown:!0,dateFormat:"yyyy/MM/dd",placeholderText:"YYYY/MM/DD",customInput:(0,l.jsx)(M.Z,{fullWidth:!0}),id:"date",onChange:S("date"),clearIcon:(0,l.jsx)(g.Z,{edge:"end",onClick:S("date"),children:(0,l.jsx)(c.Z,{fontSize:"1.25rem",icon:"ic:baseline-clear"})})})})}),(0,l.jsx)(b.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{fullWidth:!0,type:"text",label:"タイトル",value:null==N?void 0:N.subject,id:"subject",onChange:S("subject")})}),(0,l.jsx)(b.ZP,{item:!0,xs:12,children:(0,l.jsx)(h.Z,{fullWidth:!0,rows:9,multiline:!0,label:"本文",value:null==N?void 0:N.content,id:"content",onChange:S("content")})}),(0,l.jsx)(E,{fileId:"file1",label:"ファイル1",value:null==N?void 0:N.file1,onChange:S("file1")}),(0,l.jsx)(E,{fileId:"file2",label:"ファイル2",value:null==N?void 0:N.file2,onChange:S("file2")}),(0,l.jsx)(E,{fileId:"file3",label:"ファイル3",value:null==N?void 0:N.file3,onChange:S("file3")}),(0,l.jsx)(b.ZP,{item:!0,xs:12,children:(0,l.jsx)(x.Z,{type:"submit",variant:"contained",children:"保存"})})]})})})]})};var P=N},67739:function(e,i,t){var l=t(85893),n=t(67294),a=t(66476);let s=(0,n.forwardRef)((e,i)=>(0,l.jsx)(a.Z,{...e,inputRef:i,label:"年月日",autoComplete:"off"}));s.displayName="CustomDateInput",i.Z=s},74368:function(e,i,t){t.d(i,{$U:function(){return v},Bi:function(){return r},Iy:function(){return o},Kd:function(){return f},U2:function(){return u},WL:function(){return d},Wd:function(){return s},cB:function(){return p},ec:function(){return h},hN:function(){return x},sl:function(){return a},y_:function(){return c}});var l=t(27484),n=t.n(l);let a=["PUBLIC","PRIVATE","DELETED"],s={PUBLIC:"公開",PRIVATE:"非公開",DELETED:"削除"},o={END_FOLLOWING_MONTH:"30日(月末)",DATE_10_FOLLOWING_MONTH:"10日",DATE_15_FOLLOWING_MONTH:"15日",DATE_20_FOLLOWING_MONTH:"20日"},d={END_NEXT_MONTH:"翌月末",DATE_25_NEXT_MONTH:"翌月25日",DATE_20_NEXT_MONTH:"翌月20日",DATE_15_NEXT_MONTH:"翌月15日",DATE_10_NEXT_MONTH:"翌月10日",DATE_5_SECOND_MONTH:"翌々月5日",DATE_10_SECOND_MONTH:"翌々月10日"},r=e=>{let i=e.split("-");return"".concat(parseInt(i[0]),"年").concat(parseInt(i[1]),"月").concat(parseInt(i[2]),"日")},u=(e,i,t)=>{i=parseInt(i),e.scrollTop+e.clientHeight>=e.scrollHeight-i&&t()},c=e=>{let i=null==e?void 0:e.map(e=>({id:e.customerFacility.id,name:e.customerFacility.name})),t=new Map;null==i||i.forEach(e=>{t.has(e.name)||t.set(e.name,e)});let l=Array.from(t.values());return l.sort((e,i)=>e.name.localeCompare(i.name,"ja"))};var m=new Date;let p=new Date(m.getFullYear(),m.getMonth(),1),f=new Date(m.getFullYear(),m.getMonth()+1,0),v=e=>{let i=new Date(e);return i.setMonth(i.getMonth()+1),i.setDate(0),i},h=e=>e?n()(e).format("YYYY-MM-DD"):null,x=e=>{let i=Intl.NumberFormat("en-US"),t=i.format(Math.floor(parseInt(e)));return t}},81820:function(e,i,t){var l=t(10987);let n=(0,l.rh)({todos:{list:e=>[e],detail:e=>[e]},adminBulletins:{list:e=>[e],detail:e=>[e]},adminPrefectures:{list:e=>[e],detail:e=>[e]},adminItems:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCourses:{list:e=>[e],detail:e=>[e]},adminSuppliers:{list:e=>[e],detail:e=>[e],holiday:e=>[e]},adminAllergens:{list:e=>[e],detail:e=>[e]},adminItemPacks:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminItemPacksInventories:{list:e=>[e]},adminItemPackLogs:{list:e=>[e]},adminMenus:{list:e=>[e],detail:e=>[e]},adminTimeSections:{list:e=>[e],detail:e=>[e]},adminCustomers:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminSupplierPurchases:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminSupplierPurchaseMonthlies:{list:e=>[e],detail:e=>[e]},adminCustomersFacilities:{list:e=>[e],detail:e=>[e]},facilityKinds:{list:e=>[e],detail:e=>[e]},adminWarehouses:{list:e=>[e],detail:e=>[e]},adminSupplierInvoiceMonthlies:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCustomerInvoiceMonthlies:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCustomerPurchaseMenus:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseSingles:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseMousses:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseRices:{list:e=>[e],detail:e=>[e]},adminServes:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseMonthlies:{list:e=>[e],detail:e=>[e]},adminItemDeliveries:{list:e=>[e]},adminCustomerDeliveries:{list:e=>[e],deliver:e=>[e],exportDeliverySlip:e=>[e]},adminCustomerDeliveriesGenerate:{list:e=>[e],detail:e=>[e]},adminCustomerDeliveriesExportDeliverySlip:{list:e=>[e]},adminCustomerDeliveriesDeliver:{list:e=>[e]},publicTemperature:{list:e=>[e]},publicClosingType:{list:e=>[e]},publicPaymentType:{list:e=>[e]},publicTimezoneType:{list:e=>[e]},publicDeliveryFrequency:{list:e=>[e]}});i.Z=n},11750:function(e,i,t){t.d(i,{k4:function(){return p},eA:function(){return u},BZ:function(){return c},w4:function(){return m}});var l=t(36492),n=t(48228),a=t(29180);let s=e=>a.Z.get("admin/bulletins",{params:e}),o=e=>a.Z.get("admin/bulletins/".concat(e)),d=e=>a.Z.post("admin/bulletins",e,{headers:{"Content-Type":"multipart/form-data"}});var r=t(81820);let u=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.Z.adminBulletins.list(e).queryKey,n=()=>s(e);return(0,l.a)({queryKey:t,queryFn:n,...i})},c=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.Z.adminBulletins.detail(e).queryKey,n=()=>o(e);return(0,l.a)({queryKey:t,queryFn:n,...i})},m=()=>(0,n.D)(e=>d(e)),p=e=>(0,n.D)(i=>(function(e,i){return arguments.length>2&&void 0!==arguments[2]&&arguments[2],a.Z.put("admin/bulletins/".concat(e),i,{headers:{"Content-Type":"multipart/form-data"}})})(e,i))}}]);