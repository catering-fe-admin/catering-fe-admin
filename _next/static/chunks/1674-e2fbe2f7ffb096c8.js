"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1674],{51674:function(e,i,n){n.d(i,{Z:function(){return eS}});var l=n(85893),t=n(67294),r=n(11163),o=n(27484),d=n.n(o),a=n(96486),s=n(84486),c=n.n(s),u=n(7323),p=n(69417),v=n(66242),h=n(44267),m=n(86886),x=n(15861),g=n(92832),f=n(9198),y=n.n(f),Z=n(86874),j=n(66476);let P=e=>{let{filter:i,handleChange:n,setFilterApplied:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.ZP,{container:!0,spacing:5,paddingTop:"24px",padding:"0 24px",justifyContent:"center",sx:{marginTop:"16px"},children:(0,l.jsxs)(m.ZP,{item:!0,container:!0,spacing:5,alignItems:"flex-end",children:[(0,l.jsx)(m.ZP,{item:!0,md:5.825,xs:12,children:(0,l.jsx)(Z.Z,{children:(0,l.jsx)(y(),{id:"issueAtPeriodFrom",showYearDropdown:!0,showMonthDropdown:!0,selected:null==i?void 0:i.issueAtPeriodFrom,placeholderText:"YYYY/MM/DD",dateFormat:"yyyy/MM/dd",onChange:n("issueAtPeriodFrom"),customInput:(0,l.jsx)(j.Z,{fullWidth:!0,label:"　注文月（納品月)"})})})}),(0,l.jsx)(m.ZP,{item:!0,lg:.35,md:.35,marginBottom:1,display:{xs:"none",lg:"block",md:"block"},children:"〜"}),(0,l.jsx)(m.ZP,{item:!0,md:5.825,xs:12,children:(0,l.jsx)(Z.Z,{children:(0,l.jsx)(y(),{id:"issueAtPeriodTo",showYearDropdown:!0,showMonthDropdown:!0,selected:null==i?void 0:i.issueAtPeriodTo,placeholderText:"YYYY/MM/DD",dateFormat:"yyyy/MM/dd",onChange:n("issueAtPeriodTo"),customInput:(0,l.jsx)(j.Z,{fullWidth:!0})})})})]})}),(0,l.jsx)(m.ZP,{item:!0,container:!0,xs:12,justifyContent:"center",children:(0,l.jsx)(m.ZP,{xs:2,children:(0,l.jsx)(p.Z,{fullWidth:!0,color:"warning",variant:"contained",onClick:()=>t(i),children:"検索"})})})]})};var D=n(41664),b=n.n(D),C=n(53198),S=n(36492),T=n(29180);let F=e=>T.Z.get("admin/customer-purchase-monthlies",{params:e});var M=n(81820);let w=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=M.Z.adminCustomerPurchaseMonthlies.list(e).queryKey,l=()=>F(e),t={...i};return(0,S.a)({queryKey:n,queryFn:l,...t})};var k=n(36822),I=n(90629),R=n(7906),Y=n(295),N=n(53252),E=n(72882),q=n(53184),A=n(70519),Q=n(53816),_=n(26280),O=n(13113),W=[{id:"date",label:"",withSort:!1},{id:"totalMenu",label:"献立メニュー",withSort:!1},{id:"totalMousse",label:"ムース食",withSort:!1},{id:"totalRice",label:"お米",withSort:!1},{id:"totalSingle",label:"単品メニュー",withSort:!1}];let L=e=>{let{filterApplied:i}=e,n=(0,r.useRouter)(),{customerId:o,facility_id:a}=n.query||{},[s,c]=(0,t.useState)(0),[u,p]=(0,t.useState)(10),[v,h]=(0,t.useState)("desc"),[m,x]=(0,t.useState)("createdAt"),{issueAtPeriodFrom:g,issueAtPeriodTo:f}=i||{},y=(e,i)=>{c(i)},Z=e=>{p(+e.target.value),c(0)},j=e=>{h(m===e&&"asc"===v?"desc":"asc"),x(e)},P=e=>e?e.toLocaleString():0,D=()=>({...g&&{issueAtPeriodFrom:d()(g).format("YYYY-MM-DD")},...f&&{issueAtPeriodTo:d()(f).format("YYYY-MM-DD")}}),S=e=>{let i={customerId:o,customerFacilityId:a,type:{"/single-item-menu":"normal","/rice-menu-order":"rice","/mousse-menu-order":"mousse"}[e],...D()};return{pathname:e,query:i}},T={facilityId:a,page:s+1,size:u,...D()},{data:F,isFetching:M}=w(T,{enabled:!!a}),L=null==F?void 0:F.data,K=(null==L?void 0:L.content)||[],V=null==L?void 0:L.totalElements;return(0,l.jsxs)(I.Z,{sx:{width:"100%",overflow:"hidden",marginTop:"24px"},children:[(0,l.jsx)(E.Z,{children:(0,l.jsxs)(R.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,l.jsx)(q.Z,{children:(0,l.jsx)(Q.Z,{children:W.map(e=>(0,l.jsx)(N.Z,{align:e.align,style:{width:null==e?void 0:e.width},children:(null==e?void 0:e.withSort)?(0,l.jsxs)(_.Z,{active:m===e.id,direction:m===e.id?v:"asc",onClick:()=>j(e.id),children:[e.label,m===e.id?(0,l.jsx)(k.Z,{component:"span",sx:O.Z,children:"desc"===v?"sorted descending":"sorted ascending"}):null]}):e.label},e.id))})}),(0,l.jsx)(Y.Z,{children:M?(0,l.jsx)(C.Z,{rowsNum:10,cellsNum:5}):(null==K?void 0:K.length)==0?(0,l.jsx)(Q.Z,{children:(0,l.jsx)(N.Z,{colSpan:null==W?void 0:W.length,align:"center",children:"「該当する品目はありません。」"})}):null==K?void 0:K.map((e,i)=>(0,l.jsxs)(Q.Z,{hover:!0,children:[(0,l.jsx)(N.Z,{children:null==e?void 0:e.issueAtPeriod}),(0,l.jsx)(N.Z,{children:(0,l.jsx)(b(),{href:S("/menu-order"),children:P(null==e?void 0:e.totalMenu)})}),(0,l.jsx)(N.Z,{children:(0,l.jsx)(b(),{href:S("/mousse-menu-order"),children:P(null==e?void 0:e.totalMousse)})}),(0,l.jsx)(N.Z,{children:(0,l.jsx)(b(),{href:S("/rice-menu-order"),children:P(null==e?void 0:e.totalRice)})}),(0,l.jsx)(N.Z,{children:(0,l.jsx)(b(),{href:S("/single-item-menu"),children:P(null==e?void 0:e.totalSingle)})})]},i))})]})}),(0,l.jsx)(A.Z,{rowsPerPageOptions:[10,25,100],component:"div",count:V,rowsPerPage:u,page:s,onPageChange:y,onRowsPerPageChange:Z,labelRowsPerPage:"表示件数"})]})},K=()=>{let[e,i]=(0,t.useState)({issueAtPeriodFrom:null,issueAtPeriodTo:null}),[n,r]=(0,t.useState)(e),o=n=>l=>{var t,r;let o=null!==(r=null==l?void 0:null===(t=l.target)||void 0===t?void 0:t.value)&&void 0!==r?r:l;i({...e,[n]:o})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.ZP,{item:!0,xs:12,sx:{marginTop:"24px"},children:(0,l.jsx)(x.Z,{variant:"h5",children:"【注文情報】"})}),(0,l.jsx)(P,{filter:e,handleChange:o,setFilterApplied:r}),(0,l.jsx)(L,{filterApplied:n})]})};var V=n(41609),H=n.n(V),B=n(79878),z=n(18055),U=n(69368),G=n(93946),X=n(22224),$=n(53496);let J=e=>{let{error:i,helperText:n,defaultValue:t="",value:r="",onChange:o,label:d="配送頻度",readOnly:a=!1}=e,{data:s}=(0,$.Zx)(),c=(null==s?void 0:s.data)||[],u={EVERY_DAY:"毎日",EVERY_2_DAY:"２日に１回",EVERY_3_DAY:"３日に１回",EVERY_4_DAY:"４日に１回"};return(0,l.jsxs)(j.Z,{error:i,helperText:n,fullWidth:!0,select:!0,SelectProps:{readOnly:a,defaultValue:t,value:r,onChange:o},label:d,id:"DropdownDeliveryFrequency",children:[!H()(t)&&(0,l.jsx)(X.Z,{value:t,children:t}),null==c?void 0:c.map((e,i)=>(0,l.jsx)(X.Z,{value:e,children:u[e]},i))]})};var ee=n(45679),ei=n(42708),en=n(59403);let el=e=>T.Z.get("admin/facility-kinds",{params:e}),et=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=M.Z.facilityKinds.list(e).queryKey,l=i=>el({...e,page:i});return(0,en.N)({queryKey:n,queryFn:e=>{let{pageParam:i}=e;return l(i)},getNextPageParam:e=>{var i,n;if(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.last)return null;let l=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.number)+1;return l+1},...i})},er=(0,ee.Z)(()=>({menuPaper:{maxHeight:300}})),eo=e=>{let{error:i,helperText:n,defaultValue:r={},value:o={id:"",name:""},onChange:d,label:a="施設種類",readOnly:s=!1}=e,c=er(),{data:u,fetchNextPage:p,hasNextPage:v,isFetchingNextPage:h}=et({page:1,size:10},{select:e=>{var i;return null==e?void 0:null===(i=e.pages)||void 0===i?void 0:i.flatMap(e=>{var i;return null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.content})}}),m=null==u?void 0:u.filter(e=>(null==e?void 0:e.id)!=(null==r?void 0:r.id)),{ref:x,inView:g}=(0,ei.YD)({threshold:.1});return(0,t.useEffect)(()=>{g&&v&&(h||p())},[v,g,h]),(0,l.jsxs)(j.Z,{error:i,helperText:n,fullWidth:!0,select:!0,SelectProps:{readOnly:s,defaultValue:r,value:o,onChange:d,MenuProps:{classes:{paper:c.menuPaper}}},label:a,id:"DropdownFacilityKinds",children:[!H()(r)&&(0,l.jsx)(X.Z,{value:r,children:null==r?void 0:r.name}),null==m?void 0:m.map((e,i)=>(0,l.jsx)(X.Z,{value:e,children:null==e?void 0:e.name},i)),(0,l.jsx)("div",{ref:x})]})};var ed=n(71320),ea=n(24959);let es=e=>T.Z.get("admin/warehouses",{params:e}),ec=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=M.Z.adminWarehouses.list(e).queryKey,l=i=>es({...e,...i});return(0,en.N)({queryKey:n,queryFn:e=>{let{pageParam:i}=e;return l(i)},getNextPageParam:e=>{var i,n;if(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.last)return null;let l=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.number)+1;return{page:l+1}},...i})},eu=(0,ee.Z)(()=>({menuPaper:{maxHeight:300}})),ep=e=>{let{error:i,helperText:n,defaultValue:r={},value:o={id:"",name:""},onChange:d,label:a="倉庫名"}=e,s=eu(),{data:c,fetchNextPage:u,hasNextPage:p,isFetchingNextPage:v}=ec({page:1,size:10},{select:e=>{var i;return null==e?void 0:null===(i=e.pages)||void 0===i?void 0:i.flatMap(e=>{var i;return null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.content})}}),h=null==c?void 0:c.filter(e=>(null==e?void 0:e.id)!=(null==r?void 0:r.id)),{ref:m,inView:x}=(0,ei.YD)({threshold:.1});return(0,t.useEffect)(()=>{x&&p&&(v||u())},[p,x,v]),(0,l.jsxs)(j.Z,{error:i,helperText:n,fullWidth:!0,select:!0,SelectProps:{defaultValue:r,value:o,onChange:d,MenuProps:{classes:{paper:s.menuPaper}}},label:a,id:"DropdownWarehouses",children:[!H()(r)&&(0,l.jsx)(X.Z,{value:r,children:null==r?void 0:r.name}),null==h?void 0:h.map((e,i)=>(0,l.jsx)(X.Z,{value:e,children:null==e?void 0:e.name},i)),(0,l.jsx)("div",{ref:m})]})},ev=e=>{var i,n,t,r,o,a,s,c,v,h,g,f,P,D,C,S,T,F,M;let{values:w,setValues:I,handleChange:R,customerId:Y,customerFacilityId:N,isEdit:E,defaultValues:q,errors:A,setShowDialog:Q,setCustomerAccount:_}=e,{mutate:O}=(0,u.Sl)(N),{data:W}=(0,z.Dq)(Y,{enabled:!!Y}),L=w.riceDelivery.split(""),K=(e,i)=>{let n=w.riceDelivery.split("");n[e]=i?"1":"0";let l=n.join("");I({...w,riceDelivery:l})},V=()=>{O(null,{onSuccess:e=>{var i,n;Q(!0),_({username:null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.username,password:null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.password,message:"Password reset successful"})}})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"24px"},children:[(0,l.jsx)(x.Z,{variant:"h5",sx:{paddingLeft:"24px"},children:"施設登録"}),(0,l.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,l.jsx)(b(),{href:"/menu-order?customerFacilityId=".concat(N),children:(0,l.jsx)(p.Z,{variant:"contained",color:"info",children:"献立注文"})}),(0,l.jsx)(b(),{href:"/single-order/mousse/customer/".concat(Y,"/facilities/").concat(N),children:(0,l.jsx)(p.Z,{variant:"contained",color:"info",children:"ムース注文"})}),(0,l.jsx)(b(),{href:"/single-order/normal/customer/".concat(Y,"/facilities/").concat(N),children:(0,l.jsx)(p.Z,{variant:"contained",color:"info",children:"単品注文"})}),(0,l.jsx)(b(),{href:"/single-order/rice/customer/".concat(Y,"/facilities/").concat(N),children:(0,l.jsx)(p.Z,{variant:"contained",color:"info",children:"お米注文"})})]})]}),E&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.ZP,{item:!0,lg:6,md:12,xs:12,children:(0,l.jsx)(j.Z,{fullWidth:!0,type:"text",label:"顧客CD",value:null==W?void 0:null===(i=W.data)||void 0===i?void 0:i.code,id:"code",disabled:!0})}),(0,l.jsx)(m.ZP,{item:!0,lg:6,md:12,xs:12,children:(0,l.jsx)(j.Z,{fullWidth:!0,type:"text",label:"施設CD",value:null==w?void 0:w.code,id:"code",disabled:!0})})]}),(0,l.jsx)(m.ZP,{item:!0,lg:6,md:12,xs:12,children:(0,l.jsx)(j.Z,{error:!H()(null==A?void 0:A.name),helperText:null!==(t=null==A?void 0:A.name)&&void 0!==t?t:"",fullWidth:!0,type:"text",label:"施設名",value:null==w?void 0:w.name,id:"name",onChange:R("name")})}),(0,l.jsx)(m.ZP,{item:!0,lg:6,md:12,xs:12,children:(0,l.jsx)(eo,{error:!H()(null==A?void 0:A.kind),helperText:null!==(r=null==A?void 0:A.kind)&&void 0!==r?r:"",defaultValue:null==q?void 0:q.kind,value:null==w?void 0:w.kind,onChange:R("kind")})}),(0,l.jsx)(m.ZP,{container:!0,item:!0,direction:"row",spacing:5,children:(0,l.jsx)(m.ZP,{item:!0,md:12,xs:12,lg:6,children:(0,l.jsx)(Z.Z,{sx:{width:"100%"},children:(0,l.jsx)(y(),{isClearable:!0,selected:(null==w?void 0:w.contractAt)?new Date(null==w?void 0:null===(n=w.contractAt)||void 0===n?void 0:n.split("/").join("-")):null,showYearDropdown:!0,showMonthDropdown:!0,placeholderText:"YYYY/MM/DD",dateFormat:"yyyy/MM/dd",customInput:(0,l.jsx)(j.Z,{fullWidth:!0,autoComplete:"off",error:!H()(null==A?void 0:A.contractAt),helperText:null!==(o=null==A?void 0:A.contractAt)&&void 0!==o?o:"",label:"契約開始日"}),id:"dateFrom",onChange:e=>I({...w,contractAt:e?d()(e).format("YYYY-MM-DD"):null}),clearIcon:(0,l.jsx)(G.Z,{edge:"end",onClick:e=>I({...w,contractAt:e}),children:(0,l.jsx)(B.Z,{fontSize:"1.25rem",icon:"ic:baseline-clear"})})})})})}),(0,l.jsx)(m.ZP,{item:!0,lg:6,md:12,xs:12,children:(0,l.jsx)(ed.Z,{error:!H()(null==A?void 0:A.prefecture),helperText:null!==(a=null==A?void 0:A.prefecture)&&void 0!==a?a:"",defaultValue:null==q?void 0:q.prefecture,value:null==w?void 0:w.prefecture,onChange:R("prefecture")})}),(0,l.jsx)(m.ZP,{item:!0,lg:6,md:12,xs:12,children:(0,l.jsx)(j.Z,{error:!H()(null==A?void 0:A.postalCode),helperText:null!==(s=null==A?void 0:A.postalCode)&&void 0!==s?s:"",type:"text",label:"〒",value:null==w?void 0:w.postalCode,id:"postalCode",onChange:R("postalCode")})}),(0,l.jsx)(m.ZP,{item:!0,lg:6,md:12,xs:12,children:(0,l.jsx)(j.Z,{error:!H()(null==A?void 0:A.address),helperText:null!==(c=null==A?void 0:A.address)&&void 0!==c?c:"",fullWidth:!0,type:"text",label:"住所",value:null==w?void 0:w.address,id:"address",onChange:R("address")})}),(0,l.jsxs)(m.ZP,{container:!0,item:!0,direction:"row",spacing:5,children:[(0,l.jsx)(m.ZP,{item:!0,xs:6,children:(0,l.jsx)(j.Z,{error:!H()(null==A?void 0:A.telephone),helperText:null!==(v=null==A?void 0:A.telephone)&&void 0!==v?v:"",fullWidth:!0,type:"text",label:"電話番号",value:null==w?void 0:w.telephone,id:"telephone",onChange:R("telephone")})}),(0,l.jsx)(m.ZP,{item:!0,xs:6,children:(0,l.jsx)(j.Z,{error:!H()(null==A?void 0:A.fax),helperText:null!==(h=null==A?void 0:A.fax)&&void 0!==h?h:"",fullWidth:!0,type:"text",label:"FAX番号",value:null==w?void 0:w.fax,id:"fax",onChange:R("fax")})})]}),(0,l.jsxs)(m.ZP,{container:!0,item:!0,direction:"row",spacing:5,children:[(0,l.jsx)(m.ZP,{item:!0,xs:6,children:(0,l.jsx)(j.Z,{error:!H()(null==A?void 0:A.pic),helperText:null!==(g=null==A?void 0:A.pic)&&void 0!==g?g:"",fullWidth:!0,type:"text",label:"担当者名",value:null==w?void 0:w.pic,id:"pic",onChange:R("pic")})}),(0,l.jsx)(m.ZP,{item:!0,xs:6,children:(0,l.jsx)(j.Z,{error:!H()(null==A?void 0:A.email),helperText:null!==(f=null==A?void 0:A.email)&&void 0!==f?f:"",fullWidth:!0,type:"email",label:"担当者メールアドレス",value:null==w?void 0:w.email,id:"email",onChange:R("email")})})]}),(0,l.jsx)(m.ZP,{container:!0,item:!0,direction:"row",spacing:5,children:(0,l.jsx)(m.ZP,{item:!0,xs:6,children:(0,l.jsx)(j.Z,{error:!H()(null==A?void 0:A.username),helperText:null!==(P=null==A?void 0:A.username)&&void 0!==P?P:"",fullWidth:!0,type:"text",label:"ログイン ID",value:null==w?void 0:w.username,id:"username",onChange:R("username")})})}),E&&(0,l.jsx)(k.Z,{sx:{marginTop:"16px",width:"100%",display:"flex",justifyContent:"center"},children:(0,l.jsx)(p.Z,{variant:"contained",color:"success",onClick:V,children:"パスワード再発行"})}),(0,l.jsx)(m.ZP,{item:!0,xs:4,children:(0,l.jsx)(j.Z,{error:!H()(null==A?void 0:A.totalResident),helperText:null!==(D=null==A?void 0:A.totalResident)&&void 0!==D?D:"",fullWidth:!0,type:"text",label:"入所者数人",value:null==w?void 0:w.totalResident,id:"totalResident",onChange:R("totalResident")})}),(0,l.jsx)(m.ZP,{item:!0,xs:4,children:(0,l.jsx)(j.Z,{error:!H()(null==A?void 0:A.pickleQty),helperText:null!==(C=null==A?void 0:A.pickleQty)&&void 0!==C?C:"",fullWidth:!0,type:"text",label:"漬物",value:null==w?void 0:w.pickleQty,id:"pickleQty",onChange:R("pickleQty")})}),(0,l.jsx)(m.ZP,{item:!0,xs:4,children:(0,l.jsx)(j.Z,{error:!H()(null==A?void 0:A.cornQty),helperText:null!==(S=null==A?void 0:A.cornQty)&&void 0!==S?S:"",fullWidth:!0,type:"text",label:"コーン",value:null==w?void 0:w.cornQty,id:"cornQty",onChange:R("cornQty")})}),(0,l.jsxs)(m.ZP,{container:!0,item:!0,direction:"row",spacing:5,children:[(0,l.jsx)(m.ZP,{item:!0,xs:6,children:(0,l.jsx)(ep,{error:!H()(null==A?void 0:A.warehouse),helperText:null!==(T=null==A?void 0:A.warehouse)&&void 0!==T?T:"",defaultValue:null==q?void 0:q.warehouse,value:null==w?void 0:w.warehouse,onChange:R("warehouse")})}),(0,l.jsx)(m.ZP,{item:!0,xs:6,children:(0,l.jsx)(J,{error:!H()(null==A?void 0:A.deliveryFrequency),helperText:null!==(F=null==A?void 0:A.deliveryFrequency)&&void 0!==F?F:"",defaultValue:null==q?void 0:q.deliveryFrequency,value:null==w?void 0:w.deliveryFrequency,onChange:R("deliveryFrequency")})}),(0,l.jsxs)(m.ZP,{item:!0,xs:6,children:["お米販売",(0,l.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,l.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(U.Z,{checked:null==w?void 0:w.isSellRice,onClick:()=>I({...w,isSellRice:!0})}),"する"]}),(0,l.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(U.Z,{checked:!(null==w?void 0:w.isSellRice),onClick:()=>I({...w,isSellRice:!1})}),"しない"]})]})]}),(0,l.jsx)(m.ZP,{item:!0,xs:6}),(0,l.jsx)(m.ZP,{item:!0,xs:6,children:(0,l.jsx)(ea.Z,{error:!H()(null==A?void 0:A.riceSupplier),helperText:null!==(M=null==A?void 0:A.riceSupplier)&&void 0!==M?M:"",label:"米業者",type:"RICE",defaultValue:null==q?void 0:q.riceSupplier,value:null==w?void 0:w.riceSupplier,onChange:R("riceSupplier")})}),(0,l.jsxs)(m.ZP,{item:!0,xs:6,children:["納品曜日",(0,l.jsxs)("div",{children:[(0,l.jsx)(U.Z,{checked:"1"==L[0],onChange:e=>K(0,e.target.checked)}),"月",(0,l.jsx)(U.Z,{checked:"1"==L[1],onChange:e=>K(1,e.target.checked)}),"火",(0,l.jsx)(U.Z,{checked:"1"==L[2],onChange:e=>K(2,e.target.checked)}),"水",(0,l.jsx)(U.Z,{checked:"1"==L[3],onChange:e=>K(3,e.target.checked)}),"木",(0,l.jsx)(U.Z,{checked:"1"==L[4],onChange:e=>K(4,e.target.checked)}),"金",(0,l.jsx)(U.Z,{checked:"1"==L[5],onChange:e=>K(5,e.target.checked)}),"土",(0,l.jsx)(U.Z,{checked:"1"==L[6],onChange:e=>K(6,e.target.checked)}),"日"]})]})]})]})};var eh=n(50361),em=n.n(eh);let ex=e=>{var i;let{values:n,setValues:r}=e,o=(0,t.useRef)(null),a=()=>{o.current.click()},s=e=>{let i=em()(n.docs);i.push({file:e.target.files[0],uploadDate:d()()}),r({...n,docs:i})},c=e=>{let i=em()(n.docs);i.splice(e,1),r({...n,docs:i})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.ZP,{item:!0,xs:12,sx:{marginTop:"24px"},children:(0,l.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,l.jsx)(x.Z,{variant:"h5",children:"【ファイル管理】"}),(0,l.jsxs)(p.Z,{variant:"contained",color:"info",onClick:a,children:["新規ファイルアップロード",(0,l.jsx)("input",{type:"file",hidden:!0,onChange:s,ref:o})]})]})}),(0,l.jsx)(m.ZP,{item:!0,xs:12,children:(0,l.jsx)(I.Z,{sx:{width:"100%",overflow:"hidden"},children:(0,l.jsx)(E.Z,{children:(0,l.jsxs)(R.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,l.jsx)(q.Z,{children:(0,l.jsxs)(Q.Z,{children:[(0,l.jsx)(N.Z,{children:"ファイル名"}),(0,l.jsx)(N.Z,{children:"アップロード日"}),(0,l.jsx)(N.Z,{align:"right",children:"アクション"})]})}),(0,l.jsx)(Y.Z,{children:null==n?void 0:null===(i=n.docs)||void 0===i?void 0:i.map((e,i)=>{var n;let t=d()(e.uploadDate).format("YYYY年MM月DD日"),r=d()(e.uploadDate).toISOString();return(0,l.jsxs)(Q.Z,{children:[(0,l.jsx)(N.Z,{children:(null==e?void 0:null===(n=e.file)||void 0===n?void 0:n.name)||(null==e?void 0:e.name)}),(0,l.jsx)(N.Z,{children:t}),(0,l.jsx)(N.Z,{align:"right",children:(0,l.jsx)(p.Z,{variant:"contained",color:"error",onClick:()=>c(i),children:"削除"})})]},"".concat(r,"-").concat(i))})})]})})})})]})},eg=e=>{let{error:i,helperText:n,defaultValue:t={},value:r={id:"",name:""},onChange:o,label:d="締日",customerId:a,readOnly:s=!1}=e,{data:c}=(0,z.Dq)(a,{enabled:!!a,select:e=>{var i,n;return null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(n=i.billings)||void 0===n?void 0:n.filter(e=>null==e?void 0:e.name)}});return(0,l.jsxs)(j.Z,{error:i,helperText:n,fullWidth:!0,select:!0,SelectProps:{readOnly:s,defaultValue:t,value:r,onChange:o},label:d,id:"billingAddressDropdown",children:[!H()(t)&&(0,l.jsx)(X.Z,{value:t,children:null==t?void 0:t.name}),null==c?void 0:c.map((e,i)=>(0,l.jsx)(X.Z,{value:e,children:null==e?void 0:e.name},i))]})},ef=e=>{var i;let{customerId:n,defaultValues:t,values:r,handleChange:o,errors:d}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.ZP,{item:!0,xs:12,sx:{marginTop:"24px"},children:(0,l.jsx)(x.Z,{variant:"h5",children:"【請求情報】"})}),(0,l.jsx)(m.ZP,{item:!0,xs:12,children:(0,l.jsx)(eg,{error:!H()(null==d?void 0:d.billing),helperText:null!==(i=null==d?void 0:d.billing)&&void 0!==i?i:"",customerId:n,defaultValue:null==t?void 0:t.billing,value:null==r?void 0:r.billing,onChange:o("billing"),label:"Billing"})})]})};var ey=n(34386),eZ=n(56805);let ej=e=>{var i;let{values:n,setValues:r}=e,o=(e,i)=>{let l=(0,a.cloneDeep)(n),t=(0,a.cloneDeep)(l.items);t[i].item=e,r({...n,items:t})},d=(e,i,l)=>{let t=(0,a.cloneDeep)(n),o=(0,a.cloneDeep)(t.items);o[l][e]=i,r({...n,items:o})},s=()=>{let e=(0,a.cloneDeep)(n),i=[...e.items,{id:null,item:{},kiloPrice:0}];r({...n,items:i})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.ZP,{item:!0,xs:12,sx:{marginTop:"24px"},children:(0,l.jsx)(x.Z,{variant:"h5",children:"【米の販売価格】"})}),null==n?void 0:null===(i=n.items)||void 0===i?void 0:i.map((e,i)=>(0,l.jsx)(t.Fragment,{children:(0,l.jsxs)(m.ZP,{container:!0,item:!0,direction:"row",spacing:5,children:[(0,l.jsx)(m.ZP,{item:!0,xs:6,children:(0,l.jsx)(eZ.Z,{value:null==e?void 0:e.item,defaultValue:null==e?void 0:e.item,onChange:e=>o(e,i),withAdditionalParams:!0,additionalParams:{type:"RICE"}})}),(0,l.jsx)(m.ZP,{item:!0,xs:6,children:(0,l.jsx)(j.Z,{fullWidth:!0,type:"text",label:"キロ価格",value:null==e?void 0:e.kiloPrice,onChange:e=>d("kiloPrice",e.target.value,i)})})]})},i)),(0,l.jsx)(k.Z,{sx:{display:"flex",justifyContent:"center",marginTop:"24px"},children:(0,l.jsx)(ey.Z,{title:"Add Rice Selling Price",children:(0,l.jsx)(G.Z,{color:"success",variant:"contained",onClick:s,children:(0,l.jsx)(B.Z,{icon:"ep:circle-plus-filled",fontSize:50})})})})]})},eP=[{type:"MORNING",label:"朝"},{type:"NOON",label:"昼"},{type:"NIGHT",label:"夜"}],eD=e=>{var i,n,r,o,d,a,s,c,u;let{values:p,setValues:v,handleChange:h,errors:g}=e,f=(e,i,n)=>{let l=em()(p.prices);l[e][i]=n,v({...p,prices:l})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.ZP,{item:!0,xs:12,sx:{marginTop:"24px"},children:(0,l.jsx)(x.Z,{variant:"h5",children:"【販売単価】"})}),(0,l.jsx)(m.ZP,{item:!0,xs:4,children:(0,l.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,l.jsx)(j.Z,{error:!H()(null==g?void 0:g.riceLotPrice),helperText:null!==(i=null==g?void 0:g.riceLotPrice)&&void 0!==i?i:"",fullWidth:!0,type:"text",label:"お米（ロット価格",value:null==p?void 0:p.riceLotPrice,id:"riceLotPrice",onChange:h("riceLotPrice")}),(0,l.jsx)(x.Z,{variant:"p",sx:{marginTop:"16px"},children:"円"})]})}),eP.map((e,i)=>{var s,c,u,v,h,y,Z,P,D,b;return(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(m.ZP,{item:!0,xs:12,children:(0,l.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,l.jsx)(x.Z,{variant:"p",children:e.label}),(0,l.jsx)(j.Z,{error:!H()(g["prices[".concat(i,"].price")]),helperText:null!==(n=g["prices[".concat(i,"].price")])&&void 0!==n?n:"",type:"text",value:null==p?void 0:null===(s=p.prices)||void 0===s?void 0:null===(c=s[i])||void 0===c?void 0:c.price,id:"price",onChange:e=>f(i,"price",e.target.value)}),(0,l.jsx)(x.Z,{variant:"p",children:"円"})]})}),(0,l.jsx)(m.ZP,{item:!0,xs:12,children:(0,l.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,l.jsx)(x.Z,{variant:"p",sx:{visibility:"hidden"},children:"朝"}),(0,l.jsx)(j.Z,{error:!H()(g["prices[".concat(i,"].logicFirstResident")]),helperText:null!==(r=g["prices[".concat(i,"].logicFirstResident")])&&void 0!==r?r:"",type:"text",value:null==p?void 0:null===(u=p.prices)||void 0===u?void 0:null===(v=u[i])||void 0===v?void 0:v.logicFirstResident,id:"logicFirstResident",onChange:e=>f(i,"logicFirstResident",e.target.value)}),(0,l.jsx)(x.Z,{variant:"p",children:"人前以上の場合は一律"}),(0,l.jsx)(j.Z,{error:!H()(g["prices[".concat(i,"].logicSecondResident")]),helperText:null!==(o=g["prices[".concat(i,"].logicSecondResident")])&&void 0!==o?o:"",type:"text",value:null==p?void 0:null===(h=p.prices)||void 0===h?void 0:null===(y=h[i])||void 0===y?void 0:y.logicSecondResident,id:"logicSecondResident",onChange:e=>f(i,"logicSecondResident",e.target.value)}),(0,l.jsx)(x.Z,{variant:"p",children:"円"})]})}),(0,l.jsx)(m.ZP,{item:!0,xs:12,children:(0,l.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,l.jsx)(x.Z,{variant:"p",sx:{visibility:"hidden"},children:"朝"}),(0,l.jsx)(j.Z,{error:!H()(g["prices[".concat(i,"].logicFirstPrice")]),helperText:null!==(d=g["prices[".concat(i,"].logicFirstPrice")])&&void 0!==d?d:"",type:"text",value:null==p?void 0:null===(Z=p.prices)||void 0===Z?void 0:null===(P=Z[i])||void 0===P?void 0:P.logicFirstPrice,id:"logicFirstPrice",onChange:e=>f(i,"logicFirstPrice",e.target.value)}),(0,l.jsx)(x.Z,{variant:"p",children:"人前以上の場合は一律"}),(0,l.jsx)(j.Z,{error:!H()(g["prices[".concat(i,"].logicSecondPrice")]),helperText:null!==(a=g["prices[".concat(i,"].logicSecondPrice")])&&void 0!==a?a:"",type:"text",value:null==p?void 0:null===(D=p.prices)||void 0===D?void 0:null===(b=D[i])||void 0===b?void 0:b.logicSecondPrice,id:"logicSecondPrice",onChange:e=>f(i,"logicSecondPrice",e.target.value)}),(0,l.jsx)(x.Z,{variant:"p",children:"円"})]})})]},i)}),(0,l.jsx)(m.ZP,{item:!0,xs:12,children:(0,l.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,l.jsx)(j.Z,{error:!H()(null==g?void 0:g.minQty),helperText:null!==(s=null==g?void 0:g.minQty)&&void 0!==s?s:"",fullWidth:!0,type:"text",label:"最低注文数",value:null==p?void 0:p.minQty,id:"minQty",onChange:h("minQty")}),(0,l.jsx)(x.Z,{variant:"p",sx:{marginTop:"16px"},children:"食以上"})]})}),(0,l.jsxs)(m.ZP,{container:!0,item:!0,direction:"row",spacing:5,children:[(0,l.jsx)(m.ZP,{item:!0,md:12,xs:12,lg:6,children:(0,l.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[(0,l.jsx)(U.Z,{checked:null==p?void 0:p.isSetting,onChange:e=>v({...p,isSetting:e.target.checked})}),(0,l.jsx)(Z.Z,{sx:{width:"100%",top:"0px"},children:(0,l.jsx)(y(),{isClearable:!0,selected:null==p?void 0:p.settingMinQtyDate,showYearDropdown:!0,showMonthDropdown:!0,placeholderText:"YYYY/MM/DD",dateFormat:"yyyy/MM/dd",customInput:(0,l.jsx)(j.Z,{fullWidth:!0,autoComplete:"off",error:!H()(null==g?void 0:g.settingMinQtyDate),helperText:null!==(c=null==g?void 0:g.settingMinQtyDate)&&void 0!==c?c:"",label:"",style:{top:"0px"}}),id:"dateFrom",onChange:e=>v({...p,settingMinQtyDate:e}),clearIcon:(0,l.jsx)(G.Z,{edge:"end",onClick:e=>v({...p,settingMinQtyDate:e}),children:(0,l.jsx)(B.Z,{fontSize:"1.25rem",icon:"ic:baseline-clear"})})})})]})}),(0,l.jsx)(m.ZP,{item:!0,xs:6,children:(0,l.jsxs)(k.Z,{sx:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,l.jsx)(x.Z,{variant:"p",children:"の配食分からは"}),(0,l.jsx)(j.Z,{error:!H()(null==g?void 0:g.settingMinQty),helperText:null!==(u=null==g?void 0:g.settingMinQty)&&void 0!==u?u:"",fullWidth:!0,type:"text",value:null==p?void 0:p.settingMinQty,id:"settingMinQty",onChange:h("settingMinQty")}),(0,l.jsx)(x.Z,{variant:"p",children:"食以上"})]})})]})]})},eb={name:"",address:"",postalCode:"",telephone:"",fax:"",pic:"",email:"",totalResident:0,minQty:0,settingMinQtyDate:"",settingMinQty:0,pickleQty:0,cornQty:0,isSellRice:!0,riceLotPrice:0,isSetting:!0,prefecture:{},customer:{},billing:{},prices:[{type:"MORNING",price:"",logicFirstResident:"",logicSecondResident:"",logicFirstPrice:"",logicSecondPrice:""},{type:"NOON",price:"",logicFirstResident:"",logicSecondResident:"",logicFirstPrice:"",logicSecondPrice:""},{type:"NIGHT",price:"",logicFirstResident:"",logicSecondResident:"",logicFirstPrice:"",logicSecondPrice:""}],docs:[],username:"",riceSupplier:{},riceDelivery:"0000000",kind:{},deliveryFrequency:"",warehouse:{},items:[{id:null,item:{},kiloPrice:0}],contractAt:""},eC=e=>{var i;let{isEdit:n,defaultValues:o}=e,s=(0,r.useRouter)(),f=s.query.id,y=s.query.facility_id,[Z,j]=(0,t.useState)(n?{...o}:eb),[P,D]=(0,t.useState)(!1),[b,C]=(0,t.useState)(null),[S,T]=(0,t.useState)({}),[F,M]=(0,t.useState)(!1),{mutate:w}=(0,u.kW)(),{mutate:k}=(0,u.gr)(null==o?void 0:o.id),I=()=>{s.back()},R={name:"施設名",address:"住所",postalCode:"〒",telephone:"電話番号",fax:"FAX番号",pic:"担当者名",email:"担当者メールアドレス",totalResident:"入所者数人",minQty:"最低注文数",settingMinQtyDate:"最低数量日付の設定",settingMinQty:"最低数量の設定",pickleQty:"漬物",cornQty:"コーン",isSellRice:"する",riceLotPrice:"お米（ロット価格",prefecture:"都道府県",customer:"customer",billing:"【請求情報】",docs:"docs",username:"ログイン ID",riceSupplier:"米業者",riceDelivery:"納品曜日",kind:"施設種類",deliveryFrequency:"配送頻度",warehouse:"倉庫名","prices[0].price":"価格","prices[1].price":"価格","prices[2].price":"価格","prices[0].logicFirstResident":"最初の居住者","prices[1].logicFirstResident":"最初の居住者","prices[2].logicFirstResident":"最初の居住者","prices[0].logicSecondResident":"第二居住者","prices[1].logicSecondResident":"第二居住者","prices[2].logicSecondResident":"第二居住者","prices[0].logicFirstPrice":"初価格","prices[1].logicFirstPrice":"初価格","prices[2].logicFirstPrice":"初価格","prices[0].logicSecondPrice":"セカンドプライス","prices[1].logicSecondPrice":"セカンドプライス","prices[2].logicSecondPrice":"セカンドプライス",contractAt:"契約開始日"},Y=()=>{var e;let i={},n={},l={name:null==Z?void 0:Z.name,address:null==Z?void 0:Z.address,postalCode:null==Z?void 0:Z.postalCode,telephone:null==Z?void 0:Z.telephone,fax:null==Z?void 0:Z.fax,pic:null==Z?void 0:Z.pic,email:null==Z?void 0:Z.email,totalResident:null==Z?void 0:Z.totalResident,minQty:null==Z?void 0:Z.minQty,settingMinQtyDate:null==Z?void 0:Z.settingMinQtyDate,settingMinQty:null==Z?void 0:Z.settingMinQty,pickleQty:null==Z?void 0:Z.pickleQty,cornQty:null==Z?void 0:Z.cornQty,riceLotPrice:null==Z?void 0:Z.riceLotPrice,prefecture:null==Z?void 0:Z.prefecture,customer:null==Z?void 0:Z.customer,billing:null==Z?void 0:Z.billing,username:null==Z?void 0:Z.username,riceSupplier:null==Z?void 0:null===(e=Z.riceSupplier)||void 0===e?void 0:e.id,riceDelivery:null==Z?void 0:Z.riceDelivery,kind:null==Z?void 0:Z.kind,deliveryFrequency:null==Z?void 0:Z.deliveryFrequency,warehouse:null==Z?void 0:Z.warehouse,contractAt:null==Z?void 0:Z.contractAt};return c()(l,(e,n)=>{null==e&&(i[n]="".concat(R[n]," は必須です。"))}),Z.prices.forEach((e,i)=>{(null==e.price||""==e.price)&&(n["prices[".concat(i,"].price")]="".concat(R["prices[".concat(i,"].price")]," は必須です。")),(null==e.logicFirstResident||""==e.logicFirstResident)&&(n["prices[".concat(i,"].logicFirstResident")]="".concat(R["prices[".concat(i,"].logicFirstResident")]," は必須です。")),(null==e.logicSecondResident||""==e.logicSecondResident)&&(n["prices[".concat(i,"].logicSecondResident")]="".concat(R["prices[".concat(i,"].logicSecondResident")]," は必須です。")),(null==e.logicFirstPrice||""==e.logicFirstPrice)&&(n["prices[".concat(i,"].logicFirstPrice")]="".concat(R["prices[".concat(i,"].logicFirstPrice")]," は必須です。")),(null==e.logicSecondPrice||""==e.logicSecondPrice)&&(n["prices[".concat(i,"].logicSecondPrice")]="".concat(R["prices[".concat(i,"].logicSecondPrice")]," は必須です。"))}),T({...i,...n}),(0,a.isEmpty)({...i,...n})},N=e=>{var i;e.preventDefault();let l=Y();if(!l)return;M(!0);let t=new FormData,{name:r,address:o,postalCode:s,telephone:c,fax:u,pic:p,email:v,totalResident:h,minQty:m,settingMinQtyDate:x,settingMinQty:g,pickleQty:f,cornQty:y,isSellRice:j,riceLotPrice:P,mousseUnitPrice:b,isSetting:S,prefecture:T,customer:F,billing:R,prices:N,docs:E,username:q,riceSupplier:A,riceDelivery:Q,kind:_,deliveryFrequency:O,warehouse:W,items:L,contractAt:K}=Z;t.append("name",r),t.append("address",o),t.append("postalCode",s),t.append("telephone",c),t.append("fax",u),t.append("pic",p),t.append("email",v),t.append("totalResident",h),t.append("minQty",m),t.append("settingMinQtyDate",x?d()(x).format("YYYY-MM-DD"):null),t.append("settingMinQty",g),t.append("pickleQty",f),t.append("cornQty",y),t.append("isSellRice",j),t.append("riceLotPrice",P||0),t.append("mousseUnitPrice",b||0),t.append("isSetting",S),t.append("prefecture.id",(null==T?void 0:T.id)||null),t.append("customer.id",(null==F?void 0:F.id)||null),t.append("billing.id",(null==R?void 0:R.id)||null),N.forEach((e,i)=>{(null==e?void 0:e.id)&&t.append("prices[".concat(i,"].id"),e.id),t.append("prices[".concat(i,"].type"),e.type),t.append("prices[".concat(i,"].price"),e.price),t.append("prices[".concat(i,"].logicFirstResident"),e.logicFirstResident),t.append("prices[".concat(i,"].logicSecondResident"),e.logicSecondResident),t.append("prices[".concat(i,"].logicFirstPrice"),e.logicFirstPrice),t.append("prices[".concat(i,"].logicSecondPrice"),e.logicSecondPrice)}),E.forEach((e,i)=>{e.id&&t.append("docs[".concat(i,"].id"),e.id),e.file&&t.append("docs[".concat(i,"].file"),e.file)}),null===(i=L.filter(e=>!(0,a.isEmpty)(null==e?void 0:e.item)))||void 0===i||i.forEach((e,i)=>{e.id&&t.append("items[".concat(i,"].id"),e.id),t.append("items[".concat(i,"].item.id"),e.item.id),t.append("items[".concat(i,"].kiloPrice"),parseFloat(e.kiloPrice))}),t.append("username",q),t.append("riceSupplier.id",(null==A?void 0:A.id)||null),t.append("riceDelivery",Q),t.append("kind.id",_.id),t.append("deliveryFrequency",O),t.append("warehouse.id",W.id),t.append("contractAt",d()(K).format("YYYY-MM-DD")),(n?k:w)(t,{onSuccess:e=>{if(null==e?void 0:e.data){var i,l;if(n){I();return}D(!0),C({username:null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.username,password:null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.password,message:"施設アカウント作成されました"}),M(!1)}}})},E=e=>i=>{var n,l;let t=null!==(l=null==i?void 0:null===(n=i.target)||void 0===n?void 0:n.value)&&void 0!==l?l:i;j({...Z,[e]:t})};return(0,t.useEffect)(()=>{f&&j({...Z,customer:{id:f}})},[f]),(0,l.jsxs)(v.Z,{children:[(0,l.jsx)(g.Z,{show:P,setShow:D,title:null==b?void 0:b.message,description:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(x.Z,{children:["ログインID: ",null==b?void 0:b.username]}),(0,l.jsxs)(x.Z,{children:["パスワード: ",null==b?void 0:b.password]})]}),onClickClose:n?void 0:I,showButton:!1}),(0,l.jsx)(h.Z,{children:(0,l.jsxs)("form",{onSubmit:N,children:[(0,l.jsxs)(m.ZP,{container:!0,xs:12,spacing:5,direction:"column",children:[(0,l.jsx)(ev,{values:Z,setValues:j,handleChange:E,customerId:null==Z?void 0:null===(i=Z.customer)||void 0===i?void 0:i.id,customerFacilityId:y,isEdit:n,defaultValues:o,errors:S,setShowDialog:D,setCustomerAccount:C}),(0,l.jsx)(eD,{values:Z,setValues:j,handleChange:E,errors:S}),(0,l.jsx)(ej,{values:Z,setValues:j,errors:S}),(0,l.jsx)(ef,{values:Z,customerId:f,defaultValues:o,handleChange:E,errors:S}),(0,l.jsx)(ex,{values:Z,setValues:j}),(0,l.jsx)(K,{})]}),(0,l.jsx)(p.Z,{type:"submit",variant:"contained",style:{marginTop:"1.5rem"},disabled:F,children:"登録"})]})})]})};var eS=eC},56805:function(e,i,n){var l=n(85893),t=n(67294),r=n(41609),o=n.n(r),d=n(24697),a=n(74368),s=n(63966),c=n(66476),u=n(84962),p=n(36822);let v=e=>{let{error:i,helperText:n,withAdditionalParams:r,additionalParams:v,defaultValue:h={},value:m={id:"",name:""},onChange:x,label:g="品目名",selectorSelectedKey:f="name",disabled:y,id:Z="dropdownItems",disableClearable:j=!1,customOptions:P,type:D="NORMAL"}=e,[b,C]=(0,t.useState)(""),[S]=(0,d.Nr)(b,300),T={page:1,size:10,name:S,type:D,...v};o()(T.name)&&delete T.name;let{data:F,fetchNextPage:M,hasNextPage:w,isFetchingNextPage:k}=(0,s.Ui)(T,{enabled:!y&&(!r||!o()(v)),select:e=>{var i;return null==e?void 0:null===(i=e.pages)||void 0===i?void 0:i.flatMap(e=>{var i;return null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.content})}}),I=e=>{let i=e.currentTarget;(0,a.U2)(i,30,async()=>{w&&(k||M())})},R=(e,i,n)=>{e&&"blur"===e.type?C(""):"reset"!==n&&C(i)};return(0,l.jsx)(u.Z,{options:P||F||[],getOptionLabel:e=>(null==e?void 0:e[f])||"",id:Z,disableClearable:j,onInputChange:R,onChange:(e,i)=>x(i),disabled:y,renderInput:e=>(0,l.jsx)(c.Z,{...e,label:g,error:i,helperText:n}),renderOption:(e,i)=>(0,t.createElement)(p.Z,{...e,component:"li",key:null==i?void 0:i.id},null==i?void 0:i[f]),ListboxProps:{onScroll:I,style:{maxHeight:150}},defaultValue:h,value:m})};i.Z=v},71320:function(e,i,n){var l=n(85893),t=n(67294),r=n(24697),o=n(36822),d=n(41609),a=n.n(d),s=n(66476),c=n(84962),u=n(70152),p=n(74368);let v=e=>{let{error:i,helperText:n,defaultValue:d={},value:v={id:"",name:""},onChange:h,label:m="都道府県",disabled:x}=e,[g,f]=(0,t.useState)(""),[y]=(0,r.Nr)(g,300),Z={page:1,size:5,name:y};a()(Z.name)&&delete Z.name;let{data:j,fetchNextPage:P,hasNextPage:D,isFetchingNextPage:b}=(0,u.Fx)(Z,{select:e=>{var i;return null==e?void 0:null===(i=e.pages)||void 0===i?void 0:i.flatMap(e=>{var i;return null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.content})}}),C=e=>{let i=e.currentTarget;(0,p.U2)(i,30,async()=>{D&&(b||P())})},S=(e,i,n)=>{e&&"blur"===e.type?f(""):"reset"!==n&&f(i)};return(0,l.jsx)(c.Z,{options:j||[],getOptionLabel:e=>(null==e?void 0:e.name)||"",id:"autocomplete-custom",onInputChange:S,onChange:(e,i)=>h(i),disabled:x,renderInput:e=>(0,l.jsx)(s.Z,{...e,label:m,error:i,helperText:n}),renderOption:(e,i)=>(0,t.createElement)(o.Z,{...e,component:"li",key:null==i?void 0:i.id},null==i?void 0:i.name),ListboxProps:{onScroll:C,style:{maxHeight:150}},defaultValue:d,value:v})};i.Z=v},24959:function(e,i,n){var l=n(85893),t=n(67294),r=n(41609),o=n.n(r),d=n(24697),a=n(74368),s=n(86965),c=n(66476),u=n(84962),p=n(36822);let v=e=>{let{error:i,helperText:n,withAdditionalParams:r,additionalParams:v,defaultValue:h={},value:m={id:"",name:""},onChange:x,label:g="仕入先",type:f,selectorSelectedKey:y="name",disabled:Z,id:j="dropdownItems",disableClearable:P=!1,customOptions:D}=e,[b,C]=(0,t.useState)(""),[S]=(0,d.Nr)(b,300),T={page:1,size:10,name:S,...f&&{type:f},...v};o()(T.name)&&delete T.name;let{data:F,fetchNextPage:M,hasNextPage:w,isFetchingNextPage:k}=(0,s.By)(T,{enabled:!r||!o()(v),select:e=>{var i;return null==e?void 0:null===(i=e.pages)||void 0===i?void 0:i.flatMap(e=>{var i;return null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.content})}}),I=e=>{let i=e.currentTarget;(0,a.U2)(i,30,async()=>{w&&(k||M())})},R=(e,i,n)=>{e&&"blur"===e.type?C(""):"reset"!==n&&C(i)};return(0,l.jsx)(u.Z,{options:D||F||[],getOptionLabel:e=>(null==e?void 0:e[y])||"",id:j,disableClearable:P,onInputChange:R,onChange:(e,i)=>x(i),disabled:Z,renderInput:e=>(0,l.jsx)(c.Z,{...e,label:g,error:i,helperText:n}),renderOption:(e,i)=>(0,t.createElement)(p.Z,{...e,component:"li",key:null==i?void 0:i.id},null==i?void 0:i[y]),ListboxProps:{onScroll:I,style:{maxHeight:150}},defaultValue:h,value:m})};i.Z=v},92832:function(e,i,n){var l=n(85893),t=n(67294),r=n(69417),o=n(50657),d=n(90948),a=n(15861),s=n(16628),c=n(6514),u=n(31425),p=n(93946);n(63850);var v=n(79878);let h=(0,d.ZP)(p.Z)(e=>{let{theme:i}=e;return{top:0,right:0,color:"grey.500",position:"absolute",boxShadow:i.shadows[2],transform:"translate(10px, -10px)",borderRadius:i.shape.borderRadius,backgroundColor:"".concat(i.palette.background.paper," !important"),transition:"transform 0.25s ease-in-out, box-shadow 0.25s ease-in-out","&:hover":{transform:"translate(7px, -5px)"}}}),m=(0,t.forwardRef)(function(e,i){return(0,l.jsx)(s.Z,{ref:i,...e})}),x=e=>{let{show:i=!1,setShow:n,title:t="Title",description:d="本当によろしいでしょうか？",onClickSubmit:s,onClickClose:p,showButton:x=!0}=e,g=()=>{n(!1),p&&p()},f=()=>{s&&s()};return(0,l.jsxs)(o.Z,{fullWidth:!0,open:i,maxWidth:"sm",scroll:"body",onClose:g,TransitionComponent:m,sx:{"& .MuiDialog-paper":{overflow:"visible"}},children:[(0,l.jsxs)(c.Z,{children:[(0,l.jsx)(h,{onClick:g,children:(0,l.jsx)(v.Z,{icon:"tabler:x",fontSize:"1.25rem"})}),(0,l.jsx)(a.Z,{variant:"h6",children:t}),(0,l.jsx)(a.Z,{sx:{marginTop:"24px"},children:d})]}),x&&(0,l.jsxs)(u.Z,{children:[(0,l.jsx)(r.Z,{variant:"tonal",color:"secondary",onClick:g,children:"キャンセル"}),(0,l.jsx)(r.Z,{variant:"contained",sx:{mr:1},onClick:f,children:"送信"})]})]})};i.Z=x},53198:function(e,i,n){var l=n(85893),t=n(53816),r=n(53252),o=n(18979);n(67294);let d=e=>{let{rowsNum:i,cellsNum:n}=e;return[...Array(i)].map((e,i)=>(0,l.jsx)(t.Z,{children:[...Array(n)].map((e,i)=>(0,l.jsx)(r.Z,{children:(0,l.jsx)(o.Z,{animation:"wave",variant:"text"})},i))},i))};i.Z=d},74368:function(e,i,n){n.d(i,{$U:function(){return m},Bi:function(){return s},Iy:function(){return d},Kd:function(){return h},U2:function(){return c},WL:function(){return a},Wd:function(){return o},cB:function(){return v},ec:function(){return x},hN:function(){return g},sl:function(){return r},y_:function(){return u}});var l=n(27484),t=n.n(l);let r=["PUBLIC","PRIVATE","DELETED"],o={PUBLIC:"公開",PRIVATE:"非公開",DELETED:"削除"},d={END_FOLLOWING_MONTH:"30日(月末)",DATE_10_FOLLOWING_MONTH:"10日",DATE_15_FOLLOWING_MONTH:"15日",DATE_20_FOLLOWING_MONTH:"20日"},a={END_NEXT_MONTH:"翌月末",DATE_25_NEXT_MONTH:"翌月25日",DATE_20_NEXT_MONTH:"翌月20日",DATE_15_NEXT_MONTH:"翌月15日",DATE_10_NEXT_MONTH:"翌月10日",DATE_5_SECOND_MONTH:"翌々月5日",DATE_10_SECOND_MONTH:"翌々月10日"},s=e=>{let i=e.split("-");return"".concat(parseInt(i[0]),"年").concat(parseInt(i[1]),"月").concat(parseInt(i[2]),"日")},c=(e,i,n)=>{i=parseInt(i),e.scrollTop+e.clientHeight>=e.scrollHeight-i&&n()},u=e=>{let i=null==e?void 0:e.map(e=>({id:e.customerFacility.id,name:e.customerFacility.name})),n=new Map;null==i||i.forEach(e=>{n.has(e.name)||n.set(e.name,e)});let l=Array.from(n.values());return l.sort((e,i)=>e.name.localeCompare(i.name,"ja"))};var p=new Date;let v=new Date(p.getFullYear(),p.getMonth(),1),h=new Date(p.getFullYear(),p.getMonth()+1,0),m=e=>{let i=new Date(e);return i.setMonth(i.getMonth()+1),i.setDate(0),i},x=e=>e?t()(e).format("YYYY-MM-DD"):null,g=e=>{let i=Intl.NumberFormat("en-US"),n=i.format(Math.floor(parseInt(e)));return n}},26725:function(e,i,n){n.d(i,{B7:function(){return t},IN:function(){return o},M1:function(){return a},fw:function(){return d},x$:function(){return r}});var l=n(29180);let t=e=>l.Z.get("admin/items",{params:e}),r=e=>l.Z.get("admin/items/export",{params:e,responseType:"blob"}),o=e=>l.Z.get("admin/items/".concat(e)),d=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.Z.post("admin/items",e,{...i})},a=function(e,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.Z.put("admin/items/".concat(e),i,{...n})}},81820:function(e,i,n){var l=n(10987);let t=(0,l.rh)({todos:{list:e=>[e],detail:e=>[e]},adminBulletins:{list:e=>[e],detail:e=>[e]},adminPrefectures:{list:e=>[e],detail:e=>[e]},adminItems:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCourses:{list:e=>[e],detail:e=>[e]},adminSuppliers:{list:e=>[e],detail:e=>[e],holiday:e=>[e]},adminAllergens:{list:e=>[e],detail:e=>[e]},adminItemPacks:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminItemPacksInventories:{list:e=>[e]},adminItemPackLogs:{list:e=>[e]},adminMenus:{list:e=>[e],detail:e=>[e]},adminTimeSections:{list:e=>[e],detail:e=>[e]},adminCustomers:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminSupplierPurchases:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminSupplierPurchaseMonthlies:{list:e=>[e],detail:e=>[e]},adminCustomersFacilities:{list:e=>[e],detail:e=>[e]},facilityKinds:{list:e=>[e],detail:e=>[e]},adminWarehouses:{list:e=>[e],detail:e=>[e]},adminSupplierInvoiceMonthlies:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCustomerInvoiceMonthlies:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCustomerPurchaseMenus:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseSingles:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseMousses:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseRices:{list:e=>[e],detail:e=>[e]},adminServes:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseMonthlies:{list:e=>[e],detail:e=>[e]},adminItemDeliveries:{list:e=>[e]},adminCustomerDeliveries:{list:e=>[e],deliver:e=>[e],exportDeliverySlip:e=>[e]},adminCustomerDeliveriesGenerate:{list:e=>[e],detail:e=>[e]},adminCustomerDeliveriesExportDeliverySlip:{list:e=>[e]},adminCustomerDeliveriesDeliver:{list:e=>[e]},publicTemperature:{list:e=>[e]},publicClosingType:{list:e=>[e]},publicPaymentType:{list:e=>[e]},publicTimezoneType:{list:e=>[e]},publicDeliveryFrequency:{list:e=>[e]}});i.Z=t},18055:function(e,i,n){n.d(i,{WJ:function(){return x},dj:function(){return v},aV:function(){return p},Dq:function(){return h},WB:function(){return m}});var l=n(36492),t=n(48228),r=n(29180);let o=e=>r.Z.get("admin/customers",{params:e}),d=e=>r.Z.get("admin/customers/export",{params:e}),a=(e,i)=>r.Z.get("admin/customers/".concat(e),{params:i}),s=e=>r.Z.post("admin/customers",e),c=(e,i)=>r.Z.put("admin/customers/".concat(e),i);var u=n(81820);let p=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u.Z.adminCustomers.list(e).queryKey,t=()=>o(e),r={...i};return(0,l.a)({queryKey:n,queryFn:t,...r})},v=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u.Z.adminCustomers.export(e).queryKey,t=()=>d(e),r={...i};return(0,l.a)({queryKey:n,queryFn:t,...r})},h=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u.Z.adminCustomers.detail(e).queryKey,t=()=>a(e),r={...i};return(0,l.a)({queryKey:n,queryFn:t,...r})},m=()=>(0,t.D)(e=>s(e)),x=e=>(0,t.D)(i=>c(e,i))},7323:function(e,i,n){n.d(i,{gr:function(){return g},G9:function(){return m},XD:function(){return h},uv:function(){return v},kW:function(){return x},Sl:function(){return f}});var l=n(59403),t=n(36492),r=n(48228),o=n(29180);let d=e=>o.Z.get("admin/customer-facilities",{params:e}),a=(e,i)=>o.Z.get("admin/customer-facilities/".concat(e),{params:i}),s=e=>o.Z.post("admin/customer-facilities",e,{headers:{"Content-Type":"multipart/form-data"}}),c=(e,i)=>o.Z.put("admin/customer-facilities/".concat(e),i,{headers:{"Content-Type":"multipart/form-data"}}),u=(e,i)=>o.Z.put("admin/customer-facilities/".concat(e,"/password/reset"),i);var p=n(81820);let v=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.Z.adminCustomersFacilities.list(e).queryKey,t=i=>d({...e,page:i});return(0,l.N)({queryKey:n,queryFn:e=>{let{pageParam:i}=e;return t(i)},getNextPageParam:e=>{var i,n;if(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.last)return null;let l=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.number)+1;return l+1},...i})},h=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.Z.adminCustomersFacilities.list(e).queryKey,l=()=>d(e),r={...i};return(0,t.a)({queryKey:n,queryFn:l,...r})},m=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.Z.adminCustomersFacilities.detail(e).queryKey,l=()=>a(e),r={...i};return(0,t.a)({queryKey:n,queryFn:l,...r})},x=()=>(0,r.D)(e=>s(e)),g=e=>(0,r.D)(i=>c(e,i)),f=e=>(0,r.D)(()=>u(e))},63966:function(e,i,n){n.d(i,{Fr:function(){return v},Lm:function(){return u},Ui:function(){return a},p6:function(){return s},rh:function(){return p},yQ:function(){return c}});var l=n(59403),t=n(36492),r=n(48228),o=n(26725),d=n(81820);let a=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=d.Z.adminItems.list(e).queryKey,t=i=>(0,o.B7)({...e,...i});return(0,l.N)({queryKey:n,queryFn:e=>{let{pageParam:i}=e;return t(i)},getNextPageParam:e=>{var i,n;if(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.last)return null;let l=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.number)+1;return{page:l+1}},...i})},s=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=d.Z.adminItems.list(e).queryKey,l=()=>(0,o.B7)(e);return(0,t.a)({queryKey:n,queryFn:l,...i})},c=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=d.Z.adminItems.export(e).queryKey,l=()=>(0,o.x$)(e),r={...i};return(0,t.a)({queryKey:n,queryFn:l,...r})},u=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=d.Z.adminItems.detail(e).queryKey,l=()=>(0,o.IN)(e);return(0,t.a)({queryKey:n,queryFn:l,...i})},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.D)(i=>(0,o.fw)(i,e))},v=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.D)(n=>(0,o.M1)(e,n,i))}},70152:function(e,i,n){n.d(i,{D1:function(){return x},vM:function(){return f},i6:function(){return h},eu:function(){return m},Fx:function(){return v},cN:function(){return g}});var l=n(59403),t=n(36492),r=n(48228),o=n(29180);let d=e=>o.Z.get("admin/prefectures",{params:e}),a=(e,i)=>o.Z.get("admin/prefectures/".concat(e),{params:i}),s=e=>o.Z.delete("admin/prefectures/".concat(e)),c=e=>o.Z.post("admin/prefectures",e),u=(e,i)=>o.Z.put("admin/prefectures/".concat(e),i);var p=n(81820);let v=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.Z.adminSuppliers.list(e).queryKey,t=i=>d({...e,page:i});return(0,l.N)({queryKey:n,queryFn:e=>{let{pageParam:i}=e;return t(i)},getNextPageParam:e=>{var i,n;if(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.last)return null;let l=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.number)+1;return l+1},...i})},h=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.Z.adminPrefectures.list(e).queryKey,l=()=>d(e),r={...i};return(0,t.a)({queryKey:n,queryFn:l,...r})},m=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.Z.adminPrefectures.detail(e).queryKey,l=()=>a(e),r={...i};return(0,t.a)({queryKey:n,queryFn:l,...r})},x=()=>(0,r.D)(e=>s(e)),g=()=>(0,r.D)(e=>c(e)),f=e=>(0,r.D)(i=>u(e,i))},86965:function(e,i,n){n.d(i,{UP:function(){return P},kD:function(){return Z},Ac:function(){return x},Dc:function(){return g},fO:function(){return f},By:function(){return m},vv:function(){return y},eF:function(){return j}});var l=n(59403),t=n(36492),r=n(48228),o=n(29180);let d=e=>o.Z.get("admin/suppliers",{params:e}),a=(e,i)=>o.Z.get("admin/suppliers/".concat(e),{params:i}),s=e=>o.Z.post("admin/suppliers",e),c=(e,i)=>o.Z.put("admin/suppliers/".concat(e),i),u=(e,i)=>o.Z.get("admin/suppliers/".concat(e,"/holiday"),{params:i}),p=(e,i)=>o.Z.post("admin/suppliers/".concat(e,"/holiday"),null,{params:i}),v=(e,i)=>o.Z.delete("admin/suppliers/".concat(e,"/holiday"),{params:i});var h=n(81820);let m=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=h.Z.adminSuppliers.list(e).queryKey,t=i=>d({...e,...i});return(0,l.N)({queryKey:n,queryFn:e=>{let{pageParam:i}=e;return t(i)},getNextPageParam:e=>{var i,n;if(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.last)return null;let l=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.number)+1;return{page:l+1}},...i})},x=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=h.Z.adminSuppliers.list(e).queryKey,l=()=>d(e),r={...i};return(0,t.a)({queryKey:n,queryFn:l,...r})},g=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=h.Z.adminSuppliers.detail(e).queryKey,l=()=>a(e),r={...i};return(0,t.a)({queryKey:n,queryFn:l,...r})},f=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=h.Z.adminSuppliers.holiday(e).queryKey,l=()=>u(e),r={...i};return(0,t.a)({queryKey:n,queryFn:l,...r})},y=()=>(0,r.D)(e=>s(e)),Z=e=>(0,r.D)(i=>c(e,i)),j=e=>(0,r.D)(i=>p(e,i)),P=e=>(0,r.D)(i=>v(e,i))},53496:function(e,i,n){n.d(i,{bI:function(){return p},Zx:function(){return m},zO:function(){return v},Dh:function(){return u},E4:function(){return h}});var l=n(36492),t=n(29180);let r=()=>t.Z.get("public/item/temperature"),o=()=>t.Z.get("public/supplier/closing-type"),d=()=>t.Z.get("public/supplier/payment-type"),a=()=>t.Z.get("public/time-section/type"),s=()=>t.Z.get("public/delivery/frequency");var c=n(81820);let u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=c.Z.publicTemperature.list("").queryKey,n=()=>r();return(0,l.a)({queryKey:i,queryFn:n,...e})},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=c.Z.publicClosingType.list("").queryKey,n=()=>o();return(0,l.a)({queryKey:i,queryFn:n,...e})},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=c.Z.publicPaymentType.list("").queryKey,n=()=>d();return(0,l.a)({queryKey:i,queryFn:n,...e})},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=c.Z.publicTimezoneType.list("").queryKey,n=()=>a();return(0,l.a)({queryKey:i,queryFn:n,...e})},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=c.Z.publicDeliveryFrequency.list("").queryKey,n=()=>s();return(0,l.a)({queryKey:i,queryFn:n,...e})}}}]);