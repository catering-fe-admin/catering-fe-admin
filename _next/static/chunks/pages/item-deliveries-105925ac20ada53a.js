(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4341],{47443:function(e,t,n){var i=n(42118);e.exports=function(e,t){return!!(null==e?0:e.length)&&i(e,t,0)>-1}},1196:function(e){e.exports=function(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}},42118:function(e,t,n){var i=n(41848),r=n(62722),l=n(42351);e.exports=function(e,t,n){return t==t?l(e,t,n):i(e,r,n)}},62722:function(e){e.exports=function(e){return e!=e}},67762:function(e){e.exports=function(e,t){for(var n,i=-1,r=e.length;++i<r;){var l=t(e[i]);void 0!==l&&(n=void 0===n?l:n+l)}return n}},45652:function(e,t,n){var i=n(88668),r=n(47443),l=n(1196),o=n(74757),a=n(23593),u=n(21814);e.exports=function(e,t,n){var s=-1,d=r,c=e.length,m=!0,v=[],p=v;if(n)m=!1,d=l;else if(c>=200){var h=t?null:a(e);if(h)return u(h);m=!1,d=o,p=new i}else p=t?[]:v;e:for(;++s<c;){var f=e[s],x=t?t(f):f;if(f=n||0!==f?f:0,m&&x==x){for(var g=p.length;g--;)if(p[g]===x)continue e;t&&p.push(x),v.push(f)}else d(p,x,n)||(p!==v&&p.push(x),v.push(f))}return v}},23593:function(e,t,n){var i=n(58525),r=n(50308),l=n(21814),o=i&&1/l(new i([,-0]))[1]==1/0?function(e){return new i(e)}:r;e.exports=o},42351:function(e){e.exports=function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return -1}},50308:function(e){e.exports=function(){}},12297:function(e,t,n){var i=n(67762),r=n(6557);e.exports=function(e){return e&&e.length?i(e,r):0}},44908:function(e,t,n){var i=n(45652);e.exports=function(e){return e&&e.length?i(e):[]}},56532:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/item-deliveries",function(){return n(9700)}])},97065:function(e,t,n){"use strict";var i=n(85893),r=n(67294),l=n(41609),o=n.n(l),a=n(24697),u=n(74368),s=n(7323),d=n(66476),c=n(36822),m=n(84962);let v=e=>{let{error:t,helperText:n,defaultValue:l={},value:v={id:"",name:""},onChange:p,label:h="施設名",disabled:f,selectorSelectedKey:x="name",additionalParams:g={}}=e,[y,Z]=(0,r.useState)(""),[j]=(0,a.Nr)(y,300),T={page:1,size:5,[x]:j,...g};o()(T.name)&&delete T.name;let{data:D,fetchNextPage:b,hasNextPage:I,isFetchingNextPage:_}=(0,s.uv)(T,{select:e=>{var t;return null==e?void 0:null===(t=e.pages)||void 0===t?void 0:t.flatMap(e=>{var t;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.content})}}),C=e=>{let t=e.currentTarget;(0,u.U2)(t,30,async()=>{I&&(_||b())})},N=(e,t,n)=>{e&&"blur"===e.type?Z(""):"reset"!==n&&Z(t)},w=e=>null==e?void 0:e[x];return(0,i.jsx)(m.Z,{options:D||[],getOptionLabel:e=>w(e)||"",id:"dropdownCustomerFacilities",onInputChange:N,onChange:(e,t)=>p(t),disabled:f,renderInput:e=>(0,i.jsx)(d.Z,{...e,label:h,error:t,helperText:n}),renderOption:(e,t)=>(0,r.createElement)(c.Z,{...e,component:"li",key:null==t?void 0:t.id},w(t)||""),ListboxProps:{onScroll:C,style:{maxHeight:150}},defaultValue:l,value:v})};t.Z=v},56805:function(e,t,n){"use strict";var i=n(85893),r=n(67294),l=n(41609),o=n.n(l),a=n(24697),u=n(74368),s=n(63966),d=n(66476),c=n(84962),m=n(36822);let v=e=>{let{error:t,helperText:n,withAdditionalParams:l,additionalParams:v,defaultValue:p={},value:h={id:"",name:""},onChange:f,label:x="品目名",selectorSelectedKey:g="name",disabled:y,id:Z="dropdownItems",disableClearable:j=!1,customOptions:T,type:D="NORMAL"}=e,[b,I]=(0,r.useState)(""),[_]=(0,a.Nr)(b,300),C={page:1,size:10,name:_,type:D,...v};o()(C.name)&&delete C.name;let{data:N,fetchNextPage:w,hasNextPage:M,isFetchingNextPage:P}=(0,s.Ui)(C,{enabled:!y&&(!l||!o()(v)),select:e=>{var t;return null==e?void 0:null===(t=e.pages)||void 0===t?void 0:t.flatMap(e=>{var t;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.content})}}),E=e=>{let t=e.currentTarget;(0,u.U2)(t,30,async()=>{M&&(P||w())})},S=(e,t,n)=>{e&&"blur"===e.type?I(""):"reset"!==n&&I(t)};return(0,i.jsx)(c.Z,{options:T||N||[],getOptionLabel:e=>(null==e?void 0:e[g])||"",id:Z,disableClearable:j,onInputChange:S,onChange:(e,t)=>f(t),disabled:y,renderInput:e=>(0,i.jsx)(d.Z,{...e,label:x,error:t,helperText:n}),renderOption:(e,t)=>(0,r.createElement)(m.Z,{...e,component:"li",key:null==t?void 0:t.id},null==t?void 0:t[g]),ListboxProps:{onScroll:E,style:{maxHeight:150}},defaultValue:p,value:h})};t.Z=v},53198:function(e,t,n){"use strict";var i=n(85893),r=n(53816),l=n(53252),o=n(18979);n(67294);let a=e=>{let{rowsNum:t,cellsNum:n}=e;return[...Array(t)].map((e,t)=>(0,i.jsx)(r.Z,{children:[...Array(n)].map((e,t)=>(0,i.jsx)(l.Z,{children:(0,i.jsx)(o.Z,{animation:"wave",variant:"text"})},t))},t))};t.Z=a},74368:function(e,t,n){"use strict";n.d(t,{$U:function(){return h},Bi:function(){return s},Iy:function(){return a},Kd:function(){return p},U2:function(){return d},WL:function(){return u},Wd:function(){return o},cB:function(){return v},ec:function(){return f},hN:function(){return x},sl:function(){return l},y_:function(){return c}});var i=n(27484),r=n.n(i);let l=["PUBLIC","PRIVATE","DELETED"],o={PUBLIC:"公開",PRIVATE:"非公開",DELETED:"削除"},a={END_FOLLOWING_MONTH:"30日(月末)",DATE_10_FOLLOWING_MONTH:"10日",DATE_15_FOLLOWING_MONTH:"15日",DATE_20_FOLLOWING_MONTH:"20日"},u={END_NEXT_MONTH:"翌月末",DATE_25_NEXT_MONTH:"翌月25日",DATE_20_NEXT_MONTH:"翌月20日",DATE_15_NEXT_MONTH:"翌月15日",DATE_10_NEXT_MONTH:"翌月10日",DATE_5_SECOND_MONTH:"翌々月5日",DATE_10_SECOND_MONTH:"翌々月10日"},s=e=>{let t=e.split("-");return"".concat(parseInt(t[0]),"年").concat(parseInt(t[1]),"月").concat(parseInt(t[2]),"日")},d=(e,t,n)=>{t=parseInt(t),e.scrollTop+e.clientHeight>=e.scrollHeight-t&&n()},c=e=>{let t=null==e?void 0:e.map(e=>({id:e.customerFacility.id,name:e.customerFacility.name})),n=new Map;null==t||t.forEach(e=>{n.has(e.name)||n.set(e.name,e)});let i=Array.from(n.values());return i.sort((e,t)=>e.name.localeCompare(t.name,"ja"))};var m=new Date;let v=new Date(m.getFullYear(),m.getMonth(),1),p=new Date(m.getFullYear(),m.getMonth()+1,0),h=e=>{let t=new Date(e);return t.setMonth(t.getMonth()+1),t.setDate(0),t},f=e=>e?r()(e).format("YYYY-MM-DD"):null,x=e=>{let t=Intl.NumberFormat("en-US"),n=t.format(Math.floor(parseInt(e)));return n}},26725:function(e,t,n){"use strict";n.d(t,{B7:function(){return r},IN:function(){return o},M1:function(){return u},fw:function(){return a},x$:function(){return l}});var i=n(29180);let r=e=>i.Z.get("admin/items",{params:e}),l=e=>i.Z.get("admin/items/export",{params:e,responseType:"blob"}),o=e=>i.Z.get("admin/items/".concat(e)),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.Z.post("admin/items",e,{...t})},u=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.Z.put("admin/items/".concat(e),t,{...n})}},81820:function(e,t,n){"use strict";var i=n(10987);let r=(0,i.rh)({todos:{list:e=>[e],detail:e=>[e]},adminBulletins:{list:e=>[e],detail:e=>[e]},adminPrefectures:{list:e=>[e],detail:e=>[e]},adminItems:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCourses:{list:e=>[e],detail:e=>[e]},adminSuppliers:{list:e=>[e],detail:e=>[e],holiday:e=>[e]},adminAllergens:{list:e=>[e],detail:e=>[e]},adminItemPacks:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminItemPacksInventories:{list:e=>[e]},adminItemPackLogs:{list:e=>[e]},adminMenus:{list:e=>[e],detail:e=>[e]},adminTimeSections:{list:e=>[e],detail:e=>[e]},adminCustomers:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminSupplierPurchases:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminSupplierPurchaseMonthlies:{list:e=>[e],detail:e=>[e]},adminCustomersFacilities:{list:e=>[e],detail:e=>[e]},facilityKinds:{list:e=>[e],detail:e=>[e]},adminWarehouses:{list:e=>[e],detail:e=>[e]},adminSupplierInvoiceMonthlies:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCustomerInvoiceMonthlies:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCustomerPurchaseMenus:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseSingles:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseMousses:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseRices:{list:e=>[e],detail:e=>[e]},adminServes:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseMonthlies:{list:e=>[e],detail:e=>[e]},adminItemDeliveries:{list:e=>[e]},adminCustomerDeliveries:{list:e=>[e],deliver:e=>[e],exportDeliverySlip:e=>[e]},adminCustomerDeliveriesGenerate:{list:e=>[e],detail:e=>[e]},adminCustomerDeliveriesExportDeliverySlip:{list:e=>[e]},adminCustomerDeliveriesDeliver:{list:e=>[e]},publicTemperature:{list:e=>[e]},publicClosingType:{list:e=>[e]},publicPaymentType:{list:e=>[e]},publicTimezoneType:{list:e=>[e]},publicDeliveryFrequency:{list:e=>[e]}});t.Z=r},7323:function(e,t,n){"use strict";n.d(t,{gr:function(){return x},G9:function(){return h},XD:function(){return p},uv:function(){return v},kW:function(){return f},Sl:function(){return g}});var i=n(59403),r=n(36492),l=n(48228),o=n(29180);let a=e=>o.Z.get("admin/customer-facilities",{params:e}),u=(e,t)=>o.Z.get("admin/customer-facilities/".concat(e),{params:t}),s=e=>o.Z.post("admin/customer-facilities",e,{headers:{"Content-Type":"multipart/form-data"}}),d=(e,t)=>o.Z.put("admin/customer-facilities/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}}),c=(e,t)=>o.Z.put("admin/customer-facilities/".concat(e,"/password/reset"),t);var m=n(81820);let v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=m.Z.adminCustomersFacilities.list(e).queryKey,r=t=>a({...e,page:t});return(0,i.N)({queryKey:n,queryFn:e=>{let{pageParam:t}=e;return r(t)},getNextPageParam:e=>{var t,n;if(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.last)return null;let i=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.number)+1;return i+1},...t})},p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=m.Z.adminCustomersFacilities.list(e).queryKey,i=()=>a(e),l={...t};return(0,r.a)({queryKey:n,queryFn:i,...l})},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=m.Z.adminCustomersFacilities.detail(e).queryKey,i=()=>u(e),l={...t};return(0,r.a)({queryKey:n,queryFn:i,...l})},f=()=>(0,l.D)(e=>s(e)),x=e=>(0,l.D)(t=>d(e,t)),g=e=>(0,l.D)(()=>c(e))},63966:function(e,t,n){"use strict";n.d(t,{Fr:function(){return v},Lm:function(){return c},Ui:function(){return u},p6:function(){return s},rh:function(){return m},yQ:function(){return d}});var i=n(59403),r=n(36492),l=n(48228),o=n(26725),a=n(81820);let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.Z.adminItems.list(e).queryKey,r=t=>(0,o.B7)({...e,...t});return(0,i.N)({queryKey:n,queryFn:e=>{let{pageParam:t}=e;return r(t)},getNextPageParam:e=>{var t,n;if(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.last)return null;let i=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.number)+1;return{page:i+1}},...t})},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.Z.adminItems.list(e).queryKey,i=()=>(0,o.B7)(e);return(0,r.a)({queryKey:n,queryFn:i,...t})},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.Z.adminItems.export(e).queryKey,i=()=>(0,o.x$)(e),l={...t};return(0,r.a)({queryKey:n,queryFn:i,...l})},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.Z.adminItems.detail(e).queryKey,i=()=>(0,o.IN)(e);return(0,r.a)({queryKey:n,queryFn:i,...t})},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.D)(t=>(0,o.fw)(t,e))},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.D)(n=>(0,o.M1)(e,n,t))}},9700:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var i=n(85893),r=n(67294),l=n(74368),o=n(9198),a=n.n(o),u=n(35937),s=n.n(u),d=n(86874),c=n(66476),m=n(69417),v=n(86886),p=n(97065),h=n(56805);let f=e=>{let{setParams:t}=e,[n,o]=(0,r.useState)({requireAtFrom:l.cB,requireAtTo:l.Kd}),u=e=>t=>{o({...n,[e]:t})},f=()=>{let{requireAtFrom:e,requireAtTo:i,facility:r,item:o}=n||{},a=s()({facilityId:(null==r?void 0:r.id)||"",itemId:(null==o?void 0:o.id)||"",issueAtPeriodFrom:(0,l.ec)(e),issueAtPeriodTo:(0,l.ec)(i)},e=>!!e)||{};t(a)};return(0,i.jsxs)(v.ZP,{container:!0,spacing:5,padding:"24px",justifyContent:"center",children:[(0,i.jsxs)(v.ZP,{item:!0,container:!0,xs:12,spacing:5,alignItems:"flex-end",children:[(0,i.jsx)(v.ZP,{item:!0,md:5.825,xs:12,children:(0,i.jsx)(d.Z,{children:(0,i.jsx)(a(),{id:"requireAtFrom",showYearDropdown:!0,showMonthDropdown:!0,selected:null==n?void 0:n.requireAtFrom,placeholderText:"YYYY/MM/DD",dateFormat:"yyyy/MM/dd",onChange:u("requireAtFrom"),customInput:(0,i.jsx)(c.Z,{fullWidth:!0,label:"献立日"})})})}),(0,i.jsx)(v.ZP,{item:!0,lg:.35,md:.35,marginBottom:1,display:{xs:"none",lg:"block",md:"block"},children:"〜"}),(0,i.jsx)(v.ZP,{item:!0,md:5.825,xs:12,children:(0,i.jsx)(d.Z,{children:(0,i.jsx)(a(),{id:"requireAtTo",showYearDropdown:!0,showMonthDropdown:!0,selected:null==n?void 0:n.requireAtTo,placeholderText:"YYYY/MM/DD",dateFormat:"yyyy/MM/dd",onChange:u("requireAtTo"),customInput:(0,i.jsx)(c.Z,{fullWidth:!0,label:String.fromCharCode(8287).repeat(30)})})})})]}),(0,i.jsxs)(v.ZP,{item:!0,container:!0,xs:12,spacing:5,alignItems:"flex-end",children:[(0,i.jsx)(v.ZP,{item:!0,md:5.825,xs:12,children:(0,i.jsx)(p.Z,{label:"施設名",value:null==n?void 0:n.facility,onChange:u("facility")})}),(0,i.jsx)(v.ZP,{item:!0,lg:.35,md:.35,marginBottom:1,display:{xs:"none",lg:"block",md:"block"}}),(0,i.jsx)(v.ZP,{item:!0,md:5.825,xs:12,children:(0,i.jsx)(h.Z,{label:"商品名",value:null==n?void 0:n.item,onChange:u("item")})})]}),(0,i.jsx)(v.ZP,{item:!0,container:!0,xs:12,justifyContent:"center",children:(0,i.jsx)(v.ZP,{item:!0,xs:2,children:(0,i.jsx)(m.Z,{fullWidth:!0,color:"warning",variant:"contained",onClick:f,children:"検索"})})})]})};var x=n(89734),g=n.n(x),y=n(12297),Z=n.n(y),j=n(44908),T=n.n(j),D=n(36492),b=n(29180);let I=e=>b.Z.get("admin/item-deliveries",{params:e});var _=n(81820);let C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=_.Z.adminItemDeliveries.list(e).queryKey,i=()=>I(e);return(0,D.a)({queryKey:n,queryFn:i,...t})};var N=n(90629),w=n(7906),M=n(295),P=n(53252),E=n(72882),S=n(53184),A=n(53816),O=n(2734),F=n(53198);let k=e=>{let{params:t}=e,{palette:n}=(0,O.Z)(),[l,o]=(0,r.useState)([]),[a,u]=(0,r.useState)([]),[d,c]=(0,r.useState)(null),{isFetching:m}=C(s()(t,e=>!!e),{onSuccess:e=>{if(e){var t,n;o(g()(T()(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.map(e=>null==e?void 0:e.masterServeQty)))),u(T()(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.map(e=>{var t;return null==e?void 0:null===(t=e.item)||void 0===t?void 0:t.id}))),c(null==e?void 0:e.data)}}});return(0,i.jsx)(N.Z,{sx:{width:"100%",overflow:"hidden"},children:(0,i.jsx)(E.Z,{sx:{maxHeight:500},children:(0,i.jsxs)(w.Z,{stickyHeader:!0,"aria-label":"sticky table",style:{tableLayout:"fixed"},children:[(0,i.jsx)(S.Z,{children:(0,i.jsxs)(A.Z,{children:[(0,i.jsx)(P.Z,{align:"left",style:{width:"200px",...(null==l?void 0:l.length)!=0&&{borderRight:"1px solid ".concat(n.divider)},position:"sticky",left:0,background:"".concat(n.customColors.tableHeaderBg),zIndex:"10"}}),l.map((e,t)=>(0,i.jsxs)(P.Z,{align:"right",style:{width:"100px",borderRight:"1px solid ".concat(n.divider)},children:[e,"人前"]},t)),(0,i.jsx)(P.Z,{align:"right",style:{width:"100px",position:"sticky",right:0,background:"".concat(n.customColors.tableHeaderBg),zIndex:"10"},children:(null==l?void 0:l.length)!=0?"合計":""})]})}),(0,i.jsx)(M.Z,{children:m?(0,i.jsx)(F.Z,{rowsNum:10,cellsNum:4}):(null==d?void 0:d.length)==0?(0,i.jsx)(A.Z,{children:(0,i.jsx)(P.Z,{colSpan:(null==l?void 0:l.length)+2,align:"center",children:"「該当する品目はありません。」"})}):a.map(e=>{var t,r,o;let a=null===(t=d.find(t=>{var n;return(null==t?void 0:null===(n=t.item)||void 0===n?void 0:n.id)==e}))||void 0===t?void 0:null===(r=t.item)||void 0===r?void 0:r.name,u=Z()(null===(o=null==d?void 0:d.filter(t=>{var n;return(null==t?void 0:null===(n=t.item)||void 0===n?void 0:n.id)==e}))||void 0===o?void 0:o.map(e=>null==e?void 0:e.totalServeQty));return(0,i.jsxs)(A.Z,{hover:!0,children:[(0,i.jsx)(P.Z,{align:"left",style:{width:"200px",borderRight:"1px solid ".concat(n.divider),position:"sticky",left:0,background:"white"},component:"th",scope:"row",children:a}),null==l?void 0:l.map(t=>{var r;let l=null===(r=null==d?void 0:d.find(n=>{var i;return(null==n?void 0:null===(i=n.item)||void 0===i?void 0:i.id)==e&&(null==n?void 0:n.masterServeQty)==t}))||void 0===r?void 0:r.totalServeQty;return(0,i.jsx)(P.Z,{align:"right",style:{borderRight:"1px solid ".concat(n.divider)},children:l},"".concat(e,"-").concat(t))}),(0,i.jsx)(P.Z,{align:"right",style:{width:"100px",position:"sticky",right:0,background:"white",zIndex:"10"},component:"th",scope:"row",children:u})]},e)})})]})})})};var q=n(66242),L=n(44267),H=n(78445);let Y=()=>{let[e,t]=(0,r.useState)({requireAtFrom:(0,l.ec)(l.cB),requireAtTo:(0,l.ec)(l.Kd)});return(0,i.jsx)(v.ZP,{container:!0,spacing:6,children:(0,i.jsx)(v.ZP,{item:!0,xs:12,children:(0,i.jsxs)(q.Z,{children:[(0,i.jsx)(H.Z,{title:"注文パック数確認"}),(0,i.jsxs)(L.Z,{sx:{p:0,"&:last-child":{pb:0}},children:[(0,i.jsx)(f,{setParams:t}),(0,i.jsx)(k,{params:e})]})]})})})};var B=Y}},function(e){e.O(0,[8360,7851,8271,2288,6682,6261,6644,7064,3863,7206,1441,7727,9774,2888,179],function(){return e(e.s=56532)}),_N_E=e.O()}]);