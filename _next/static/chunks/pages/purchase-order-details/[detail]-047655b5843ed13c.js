(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2937],{58363:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/purchase-order-details/[detail]",function(){return i(23638)}])},74368:function(e,t,i){"use strict";i.d(t,{$U:function(){return v},Bi:function(){return d},Iy:function(){return s},Kd:function(){return m},U2:function(){return o},WL:function(){return u},Wd:function(){return a},cB:function(){return h},ec:function(){return f},hN:function(){return x},sl:function(){return r},y_:function(){return c}});var n=i(27484),l=i.n(n);let r=["PUBLIC","PRIVATE","DELETED"],a={PUBLIC:"公開",PRIVATE:"非公開",DELETED:"削除"},s={END_FOLLOWING_MONTH:"30日(月末)",DATE_10_FOLLOWING_MONTH:"10日",DATE_15_FOLLOWING_MONTH:"15日",DATE_20_FOLLOWING_MONTH:"20日"},u={END_NEXT_MONTH:"翌月末",DATE_25_NEXT_MONTH:"翌月25日",DATE_20_NEXT_MONTH:"翌月20日",DATE_15_NEXT_MONTH:"翌月15日",DATE_10_NEXT_MONTH:"翌月10日",DATE_5_SECOND_MONTH:"翌々月5日",DATE_10_SECOND_MONTH:"翌々月10日"},d=e=>{let t=e.split("-");return"".concat(parseInt(t[0]),"年").concat(parseInt(t[1]),"月").concat(parseInt(t[2]),"日")},o=(e,t,i)=>{t=parseInt(t),e.scrollTop+e.clientHeight>=e.scrollHeight-t&&i()},c=e=>{let t=null==e?void 0:e.map(e=>({id:e.customerFacility.id,name:e.customerFacility.name})),i=new Map;null==t||t.forEach(e=>{i.has(e.name)||i.set(e.name,e)});let n=Array.from(i.values());return n.sort((e,t)=>e.name.localeCompare(t.name,"ja"))};var p=new Date;let h=new Date(p.getFullYear(),p.getMonth(),1),m=new Date(p.getFullYear(),p.getMonth()+1,0),v=e=>{let t=new Date(e);return t.setMonth(t.getMonth()+1),t.setDate(0),t},f=e=>e?l()(e).format("YYYY-MM-DD"):null,x=e=>{let t=Intl.NumberFormat("en-US"),i=t.format(Math.floor(parseInt(e)));return i}},81820:function(e,t,i){"use strict";var n=i(10987);let l=(0,n.rh)({todos:{list:e=>[e],detail:e=>[e]},adminBulletins:{list:e=>[e],detail:e=>[e]},adminPrefectures:{list:e=>[e],detail:e=>[e]},adminItems:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCourses:{list:e=>[e],detail:e=>[e]},adminSuppliers:{list:e=>[e],detail:e=>[e],holiday:e=>[e]},adminAllergens:{list:e=>[e],detail:e=>[e]},adminItemPacks:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminItemPacksInventories:{list:e=>[e]},adminItemPackLogs:{list:e=>[e]},adminMenus:{list:e=>[e],detail:e=>[e]},adminTimeSections:{list:e=>[e],detail:e=>[e]},adminCustomers:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminSupplierPurchases:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminSupplierPurchaseMonthlies:{list:e=>[e],detail:e=>[e]},adminCustomersFacilities:{list:e=>[e],detail:e=>[e]},facilityKinds:{list:e=>[e],detail:e=>[e]},adminWarehouses:{list:e=>[e],detail:e=>[e]},adminSupplierInvoiceMonthlies:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCustomerInvoiceMonthlies:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCustomerPurchaseMenus:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseSingles:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseMousses:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseRices:{list:e=>[e],detail:e=>[e]},adminServes:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseMonthlies:{list:e=>[e],detail:e=>[e]},adminItemDeliveries:{list:e=>[e]},adminCustomerDeliveries:{list:e=>[e],deliver:e=>[e],exportDeliverySlip:e=>[e]},adminCustomerDeliveriesGenerate:{list:e=>[e],detail:e=>[e]},adminCustomerDeliveriesExportDeliverySlip:{list:e=>[e]},adminCustomerDeliveriesDeliver:{list:e=>[e]},publicTemperature:{list:e=>[e]},publicClosingType:{list:e=>[e]},publicPaymentType:{list:e=>[e]},publicTimezoneType:{list:e=>[e]},publicDeliveryFrequency:{list:e=>[e]}});t.Z=l},41285:function(e,t,i){"use strict";i.d(t,{EW:function(){return x},dW:function(){return m},ep:function(){return g},zz:function(){return h},xm:function(){return v},W1:function(){return f}});var n=i(36492),l=i(48228),r=i(29180);let a=e=>r.Z.get("admin/supplier-purchases",{params:e}),s=e=>r.Z.get("admin/supplier-purchases/".concat(e,"/export/invoice"),{responseType:"blob"}),u=e=>r.Z.get("admin/supplier-purchases/".concat(e)),d=e=>r.Z.post("admin/supplier-purchases",e),o=(e,t)=>r.Z.put("admin/supplier-purchases/".concat(e),t),c=e=>r.Z.get("admin/supplier-purchase-monthlies",{params:e});var p=i(81820);let h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=p.Z.adminSupplierPurchases.list(e).queryKey,l=()=>a(e);return(0,n.a)({queryKey:i,queryFn:l,...t})},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=p.Z.adminSupplierPurchases.export(e).queryKey,l=()=>s(e),r={...t};return(0,n.a)({queryKey:i,queryFn:l,...r})},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=p.Z.adminSupplierPurchases.detail(e).queryKey,l=()=>u(e);return(0,n.a)({queryKey:i,queryFn:l,...t})},f=()=>(0,l.D)(e=>d(e)),x=e=>(0,l.D)(t=>o(e,t)),g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=p.Z.adminSupplierPurchaseMonthlies.list(e).queryKey,l=()=>c(e);return(0,n.a)({queryKey:i,queryFn:l,...t})}},86965:function(e,t,i){"use strict";i.d(t,{UP:function(){return y},kD:function(){return T},Ac:function(){return f},Dc:function(){return x},fO:function(){return g},By:function(){return v},vv:function(){return Z},eF:function(){return P}});var n=i(59403),l=i(36492),r=i(48228),a=i(29180);let s=e=>a.Z.get("admin/suppliers",{params:e}),u=(e,t)=>a.Z.get("admin/suppliers/".concat(e),{params:t}),d=e=>a.Z.post("admin/suppliers",e),o=(e,t)=>a.Z.put("admin/suppliers/".concat(e),t),c=(e,t)=>a.Z.get("admin/suppliers/".concat(e,"/holiday"),{params:t}),p=(e,t)=>a.Z.post("admin/suppliers/".concat(e,"/holiday"),null,{params:t}),h=(e,t)=>a.Z.delete("admin/suppliers/".concat(e,"/holiday"),{params:t});var m=i(81820);let v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=m.Z.adminSuppliers.list(e).queryKey,l=t=>s({...e,...t});return(0,n.N)({queryKey:i,queryFn:e=>{let{pageParam:t}=e;return l(t)},getNextPageParam:e=>{var t,i;if(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.last)return null;let n=(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.number)+1;return{page:n+1}},...t})},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=m.Z.adminSuppliers.list(e).queryKey,n=()=>s(e),r={...t};return(0,l.a)({queryKey:i,queryFn:n,...r})},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=m.Z.adminSuppliers.detail(e).queryKey,n=()=>u(e),r={...t};return(0,l.a)({queryKey:i,queryFn:n,...r})},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=m.Z.adminSuppliers.holiday(e).queryKey,n=()=>c(e),r={...t};return(0,l.a)({queryKey:i,queryFn:n,...r})},Z=()=>(0,r.D)(e=>d(e)),T=e=>(0,r.D)(t=>o(e,t)),P=e=>(0,r.D)(t=>p(e,t)),y=e=>(0,r.D)(t=>h(e,t))},23638:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return q}});var n=i(85893),l=i(67294),r=i(11163),a=i(86965),s=i(9198),u=i.n(s),d=i(27484),o=i.n(d),c=i(86874),p=i(66476),h=i(69417),m=i(86886);let v=(0,l.forwardRef)((e,t)=>(0,n.jsx)(p.Z,{...e,inputRef:t,label:null==e?void 0:e.label,autoComplete:"off"}));v.displayName="CustomDateInput";let f=e=>{var t;let{params:i,setParams:r}=e,[a,s]=(0,l.useState)({issueAt:new Date(null==i?void 0:i.issueAt)}),d=()=>{var e;let{issueAt:t}=a||{};r({issueAt:t?null===(e=o()(t))||void 0===e?void 0:e.startOf("month").format("YYYY-MM-DD"):null})};return(0,n.jsxs)(m.ZP,{container:!0,spacing:5,padding:"24px",alignItems:"flex-end",children:[(0,n.jsx)(m.ZP,{item:!0,lg:6,md:12,xs:12,children:(0,n.jsx)(c.Z,{children:(0,n.jsx)(u(),{id:"issueAt",showMonthYearPicker:!0,selected:null==a?void 0:a.issueAt,dateFormat:"yyyy/MM",placeholderText:"YYYY-MM",onChange:e=>{s({...a,issueAt:e})},customInput:(0,n.jsx)(v,{fullWidth:!0,label:"請求月"})})})}),(0,n.jsx)(m.ZP,{item:!0,lg:3,md:12,xs:12,children:(0,n.jsx)(h.Z,{fullWidth:!0,color:"warning",variant:"contained",onClick:d,children:"検索"})})]})};var x=i(41664),g=i.n(x),Z=i(76831),T=i.n(Z),P=i(74368),y=i(41285),j=i(36822),D=i(90629),_=i(7906),b=i(295),N=i(53252),E=i(72882),M=i(53184),S=i(70519),w=i(53816),C=i(26280),O=i(15861),I=i(91327),A=[{id:"issueAt",label:"納品日",align:"left",width:200},{id:"subTotalPrice",label:"仕入額",align:"left",withSort:!0},{id:"subTotalTax",label:"消費税",align:"left",withSort:!0},{id:"totalPrice",label:"合計",align:"left",withSort:!0},{id:"action",label:"アクション",align:"right",width:200}];let F=e=>{let{additionalParams:t}=e,{supplierId:i,issueAt:r}=t||{},[a,s]=(0,l.useState)(0),[u,d]=(0,l.useState)(10),[c,p]=(0,l.useState)("desc"),[m,v]=(0,l.useState)("issueAt"),f=(e,t)=>{s(t)},x=e=>{d(+e.target.value),s(0)},Z=e=>{p(m===e&&"asc"===c?"desc":"asc"),v(e)},F={page:a+1,size:u,sort:"".concat(m,",").concat(c),...t};Object.keys(F).map(e=>{F[e]||delete F[e]});let[L,Y]=(0,l.useState)([]),[k,H]=(0,l.useState)({}),[q,W]=(0,l.useState)(null);return(0,y.zz)(F,{enabled:!!i&&!!r,onSuccess:e=>{if(null==e?void 0:e.data){let t=0,i=0,n=0,{content:l,totalElements:r}=(null==e?void 0:e.data)||{};null==l||l.forEach(e=>{t+=(null==e?void 0:e.subTotalPrice)||0,i+=(null==e?void 0:e.subTotalTax)||0,n+=(null==e?void 0:e.totalPrice)||0}),Y(l||[]),W(r),H({subTotalPrice:t,subTotalTax:i,totalPrice:n})}}}),(0,n.jsxs)(D.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,n.jsx)(E.Z,{children:(0,n.jsxs)(_.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,n.jsx)(M.Z,{children:(0,n.jsx)(w.Z,{children:A.map(e=>(0,n.jsx)(N.Z,{align:null==e?void 0:e.align,style:{width:null==e?void 0:e.width},children:(null==e?void 0:e.withSort)?(0,n.jsxs)(C.Z,{active:m===e.id,direction:m===e.id?c:"asc",onClick:()=>Z(e.id),children:[e.label,m===e.id?(0,n.jsx)(j.Z,{component:"span",sx:I.Z,children:"desc"===c?"sorted descending":"sorted ascending"}):null]}):e.label},e.id))})}),(0,n.jsx)(b.Z,{children:(null==L?void 0:L.length)==0?(0,n.jsx)(w.Z,{children:(0,n.jsx)(N.Z,{colSpan:null==A?void 0:A.length,align:"center",children:"「該当する品目はありません。」"})}):null==L?void 0:L.map((e,t)=>{var i,l;let r=(null==L?void 0:L.length)-1==t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(w.Z,{hover:!0,children:[(0,n.jsxs)(N.Z,{align:"left",children:[null===(i=null===(l=o()(null==e?void 0:e.deliveryAt))||void 0===l?void 0:l.locale(T()))||void 0===i?void 0:i.format("D"),"日"]}),(0,n.jsx)(N.Z,{align:"left",children:(0,P.hN)(null==e?void 0:e.subTotalPrice)}),(0,n.jsx)(N.Z,{align:"left",children:(0,P.hN)(null==e?void 0:e.subTotalTax)}),(0,n.jsx)(N.Z,{align:"left",children:(0,P.hN)(null==e?void 0:e.totalPrice)}),(0,n.jsx)(N.Z,{align:"right",children:(0,n.jsx)(g(),{href:{pathname:"/purchase-order/[id]",query:{id:null==e?void 0:e.id}},as:"/purchase-order/".concat(null==e?void 0:e.id),children:(0,n.jsx)(h.Z,{variant:"contained",color:"success",children:"詳細"})})})]},null==e?void 0:e.id),r&&(0,n.jsxs)(w.Z,{children:[(0,n.jsx)(N.Z,{align:"left",sx:{border:0},children:(0,n.jsx)(O.Z,{variant:"h6",children:"総合計"})}),(0,n.jsx)(N.Z,{align:"left",sx:{border:0},children:(0,n.jsx)(O.Z,{variant:"h6",children:(0,P.hN)(null==k?void 0:k.subTotalPrice)})}),(0,n.jsx)(N.Z,{align:"left",sx:{border:0},children:(0,n.jsx)(O.Z,{variant:"h6",children:(0,P.hN)(null==k?void 0:k.subTotalTax)})}),(0,n.jsx)(N.Z,{align:"left",sx:{border:0},children:(0,n.jsx)(O.Z,{variant:"h6",children:(0,P.hN)(null==k?void 0:k.totalPrice)})}),(0,n.jsx)(N.Z,{sx:{border:0}})]},null==L?void 0:L.length)]})})})]})}),(0,n.jsx)(S.Z,{rowsPerPageOptions:[10,25,100],component:"div",count:q,rowsPerPage:u,page:a,onPageChange:f,onRowsPerPageChange:x,labelRowsPerPage:"表示件数"})]})};var L=i(66242),Y=i(44267),k=i(78445);let H=()=>{let e=(0,r.useRouter)(),{detail:t,issueat:i}=e.query||{},[s,u]=(0,l.useState)({issueAt:i}),{data:d}=(0,a.Dc)(t,{enabled:!!t}),o=(null==d?void 0:d.data)||{},c={...s,supplierId:null==o?void 0:o.id,supplierType:"NORMAL"};return(0,n.jsx)(m.ZP,{container:!0,spacing:6,children:(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsxs)(L.Z,{children:[(0,n.jsx)(k.Z,{title:"仕入詳細ページ"}),(0,n.jsxs)(Y.Z,{sx:{p:0,"&:last-child":{pb:0}},children:[(0,n.jsx)(O.Z,{variant:"h4",sx:{padding:"24px",paddingBottom:"16px"},children:null==o?void 0:o.name}),(0,n.jsx)(f,{params:s,setParams:u}),(0,n.jsx)(F,{additionalParams:c})]})]})})})};var q=H}},function(e){e.O(0,[8360,7851,8271,2288,6261,3863,7815,1588,7727,9774,2888,179],function(){return e(e.s=58363)}),_N_E=e.O()}]);