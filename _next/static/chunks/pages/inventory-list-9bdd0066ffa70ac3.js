(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6267],{29788:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/inventory-list",function(){return n(60710)}])},67686:function(e,t,n){"use strict";var i=n(85893),a=n(67294),r=n(41609),l=n.n(r),o=n(24697),s=n(74368),d=n(4568),u=n(66476),c=n(84962),p=n(36822);let m=e=>{let{error:t,helperText:n,withAdditionalParams:r,additionalParams:m,defaultValue:h={},value:v={},onChange:x,label:g="",selectorSelectedKey:f="name",disabled:Z=!1,disableClearable:y,contentsModifier:j}=e,[b,P]=(0,a.useState)(""),[k]=(0,o.Nr)(b,300),C={page:1,size:10,[f]:k,...m};Object.keys(C).map(e=>{C[e]||delete C[e]});let{data:M,fetchNextPage:I,hasNextPage:S,isFetchingNextPage:w}=(0,d.SG)(C,{enabled:!Z&&(!r||!l()(m)),select:e=>{var t;let n=null==e?void 0:null===(t=e.pages)||void 0===t?void 0:t.flatMap(e=>{var t;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.content});return j?j(n):n}}),T=e=>{let t=e.currentTarget;(0,s.U2)(t,30,async()=>{S&&(w||I())})},N=(e,t,n)=>{e&&"blur"===e.type?P(""):"reset"!==n&&P(t)},D=e=>{var t;let n={...e,code:null==e?void 0:e.code,name:null==e?void 0:null===(t=e.item)||void 0===t?void 0:t.name};return null==n?void 0:n[f]};return(0,i.jsx)(c.Z,{options:M||[],getOptionLabel:e=>D(e)||"",id:"autocomplete-custom",disableClearable:y,onInputChange:N,onChange:(e,t)=>x(t),disabled:Z,renderInput:e=>(0,i.jsx)(u.Z,{...e,label:g,error:t,helperText:n}),renderOption:(e,t)=>(0,a.createElement)(p.Z,{...e,component:"li",key:null==t?void 0:t.id},D(t)||""),ListboxProps:{onScroll:T,style:{maxHeight:150}},defaultValue:h,value:v})};t.Z=m},66476:function(e,t,n){"use strict";var i=n(85893),a=n(67294),r=n(98271),l=n(90948);let o=(0,l.ZP)(r.Z)(e=>{let{theme:t,style:n}=e;return{alignItems:"flex-start","& .MuiInputLabel-root":{transform:"none",lineHeight:1.154,position:"relative",marginBottom:t.spacing(1),fontSize:t.typography.body2.fontSize,color:"".concat(t.palette.text.primary," !important")},"& .MuiInputBase-root":{borderRadius:8,backgroundColor:"transparent !important",border:"1px solid rgba(".concat(t.palette.customColors.main,", 0.2)"),transition:t.transitions.create(["border-color","box-shadow"],{duration:t.transitions.duration.shorter}),"&:not(.Mui-focused):not(.Mui-disabled):not(.Mui-error):hover":{borderColor:"rgba(".concat(t.palette.customColors.main,", 0.28)")},"&:before, &:after":{display:"none"},"&.MuiInputBase-sizeSmall":{borderRadius:6},"&.Mui-error":{borderColor:t.palette.error.main},"&.Mui-focused":{boxShadow:t.shadows[2],"& .MuiInputBase-input:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transform:"translateX(4px)"},"&.MuiInputBase-colorPrimary":{borderColor:t.palette.primary.main},"&.MuiInputBase-colorSecondary":{borderColor:t.palette.secondary.main},"&.MuiInputBase-colorInfo":{borderColor:t.palette.info.main},"&.MuiInputBase-colorSuccess":{borderColor:t.palette.success.main},"&.MuiInputBase-colorWarning":{borderColor:t.palette.warning.main},"&.MuiInputBase-colorError":{borderColor:t.palette.error.main},"&.Mui-error":{borderColor:t.palette.error.main}},"&.Mui-disabled":{backgroundColor:"".concat(t.palette.action.selected," !important")},"& .MuiInputAdornment-root":{marginTop:"0 !important"}},"& .MuiInputBase-input":{color:t.palette.text.secondary,"&:not(textarea)":{padding:"15.5px 13px"},"&:not(textarea).MuiInputBase-inputSizeSmall":{padding:"7.5px 13px"},"&:not(.MuiInputBase-readOnly):not([readonly])::placeholder":{transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter})},"&.MuiInputBase-inputAdornedStart:not(.MuiAutocomplete-input)":{paddingLeft:0},"&.MuiInputBase-inputAdornedEnd:not(.MuiAutocomplete-input)":{paddingRight:0}},"& .MuiFormHelperText-root":{lineHeight:1.154,margin:t.spacing(1,0,0),color:t.palette.text.secondary,fontSize:t.typography.body2.fontSize,"&.Mui-error":{color:t.palette.error.main}},"& .MuiSelect-select:focus, & .MuiNativeSelect-select:focus":{backgroundColor:"transparent"},"& .MuiSelect-filled .MuiChip-root":{height:22},"& .MuiAutocomplete-input":{paddingLeft:"6px !important",paddingTop:"7.5px !important",paddingBottom:"7.5px !important","&.MuiInputBase-inputSizeSmall":{paddingLeft:"6px !important",paddingTop:"2.5px !important",paddingBottom:"2.5px !important"}},"& .MuiAutocomplete-inputRoot":{paddingTop:"8px !important",paddingLeft:"8px !important",paddingBottom:"8px !important","&:not(.MuiInputBase-sizeSmall).MuiInputBase-adornedStart":{paddingLeft:"13px !important"},"&.MuiInputBase-sizeSmall":{paddingTop:"5px !important",paddingLeft:"5px !important",paddingBottom:"5px !important","& .MuiAutocomplete-tag":{margin:2,height:22}}},"& .MuiInputBase-multiline":{padding:"15.25px 13px","&.MuiInputBase-sizeSmall":{padding:"7.25px 13px"},"& textarea.MuiInputBase-inputSizeSmall:placeholder-shown":{overflowX:"hidden"}},"& + .react-datepicker__close-icon":{top:n||11,"&:after":{fontSize:"1.6rem !important"}}}}),s=(0,a.forwardRef)((e,t)=>{let{size:n="small",InputLabelProps:a,style:r,...l}=e;return(0,i.jsx)(o,{size:n,inputRef:t,...l,variant:"filled",InputLabelProps:{...a,shrink:!0},style:r})});s.displayName="CustomTextField",t.Z=s},53198:function(e,t,n){"use strict";var i=n(85893),a=n(53816),r=n(53252),l=n(18979);n(67294);let o=e=>{let{rowsNum:t,cellsNum:n}=e;return[...Array(t)].map((e,t)=>(0,i.jsx)(a.Z,{children:[...Array(n)].map((e,t)=>(0,i.jsx)(r.Z,{children:(0,i.jsx)(l.Z,{animation:"wave",variant:"text"})},t))},t))};t.Z=o},74368:function(e,t,n){"use strict";n.d(t,{$U:function(){return v},Bi:function(){return d},Iy:function(){return o},Kd:function(){return h},U2:function(){return u},WL:function(){return s},Wd:function(){return l},cB:function(){return m},ec:function(){return x},hN:function(){return g},sl:function(){return r},y_:function(){return c}});var i=n(27484),a=n.n(i);let r=["PUBLIC","PRIVATE","DELETED"],l={PUBLIC:"公開",PRIVATE:"非公開",DELETED:"削除"},o={END_FOLLOWING_MONTH:"30日(月末)",DATE_10_FOLLOWING_MONTH:"10日",DATE_15_FOLLOWING_MONTH:"15日",DATE_20_FOLLOWING_MONTH:"20日"},s={END_NEXT_MONTH:"翌月末",DATE_25_NEXT_MONTH:"翌月25日",DATE_20_NEXT_MONTH:"翌月20日",DATE_15_NEXT_MONTH:"翌月15日",DATE_10_NEXT_MONTH:"翌月10日",DATE_5_SECOND_MONTH:"翌々月5日",DATE_10_SECOND_MONTH:"翌々月10日"},d=e=>{let t=e.split("-");return"".concat(parseInt(t[0]),"年").concat(parseInt(t[1]),"月").concat(parseInt(t[2]),"日")},u=(e,t,n)=>{t=parseInt(t),e.scrollTop+e.clientHeight>=e.scrollHeight-t&&n()},c=e=>{let t=null==e?void 0:e.map(e=>({id:e.customerFacility.id,name:e.customerFacility.name})),n=new Map;null==t||t.forEach(e=>{n.has(e.name)||n.set(e.name,e)});let i=Array.from(n.values());return i.sort((e,t)=>e.name.localeCompare(t.name,"ja"))};var p=new Date;let m=new Date(p.getFullYear(),p.getMonth(),1),h=new Date(p.getFullYear(),p.getMonth()+1,0),v=e=>{let t=new Date(e);return t.setMonth(t.getMonth()+1),t.setDate(0),t},x=e=>e?a()(e).format("YYYY-MM-DD"):null,g=e=>{let t=Intl.NumberFormat("en-US"),n=t.format(Math.floor(parseInt(e)));return n}},81820:function(e,t,n){"use strict";var i=n(10987);let a=(0,i.rh)({todos:{list:e=>[e],detail:e=>[e]},adminBulletins:{list:e=>[e],detail:e=>[e]},adminPrefectures:{list:e=>[e],detail:e=>[e]},adminItems:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCourses:{list:e=>[e],detail:e=>[e]},adminSuppliers:{list:e=>[e],detail:e=>[e],holiday:e=>[e]},adminAllergens:{list:e=>[e],detail:e=>[e]},adminItemPacks:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminItemPacksInventories:{list:e=>[e]},adminItemPackLogs:{list:e=>[e]},adminMenus:{list:e=>[e],detail:e=>[e]},adminTimeSections:{list:e=>[e],detail:e=>[e]},adminCustomers:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminSupplierPurchases:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminSupplierPurchaseMonthlies:{list:e=>[e],detail:e=>[e]},adminCustomersFacilities:{list:e=>[e],detail:e=>[e]},facilityKinds:{list:e=>[e],detail:e=>[e]},adminWarehouses:{list:e=>[e],detail:e=>[e]},adminSupplierInvoiceMonthlies:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCustomerInvoiceMonthlies:{list:e=>[e],export:e=>[e],detail:e=>[e]},adminCustomerPurchaseMenus:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseSingles:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseMousses:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseRices:{list:e=>[e],detail:e=>[e]},adminServes:{list:e=>[e],detail:e=>[e]},adminCustomerPurchaseMonthlies:{list:e=>[e],detail:e=>[e]},adminItemDeliveries:{list:e=>[e]},adminCustomerDeliveries:{list:e=>[e],deliver:e=>[e],exportDeliverySlip:e=>[e]},adminCustomerDeliveriesGenerate:{list:e=>[e],detail:e=>[e]},adminCustomerDeliveriesExportDeliverySlip:{list:e=>[e]},adminCustomerDeliveriesDeliver:{list:e=>[e]},publicTemperature:{list:e=>[e]},publicClosingType:{list:e=>[e]},publicPaymentType:{list:e=>[e]},publicTimezoneType:{list:e=>[e]},publicDeliveryFrequency:{list:e=>[e]}});t.Z=a},4568:function(e,t,n){"use strict";n.d(t,{s3:function(){return f},qo:function(){return v},x5:function(){return h},bZ:function(){return x},SG:function(){return m},tj:function(){return g}});var i=n(59403),a=n(36492),r=n(48228),l=n(29180);let o=e=>l.Z.get("admin/item-packs",{params:e}),s=e=>l.Z.get("admin/item-packs/export",{params:e,responseType:"blob"}),d=e=>l.Z.get("admin/item-packs/".concat(e)),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.Z.post("admin/item-packs",e,{...t})},c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.Z.put("admin/item-packs/".concat(e),t,{...n})};var p=n(81820);let m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.Z.adminItemPacks.list(e).queryKey,a=t=>o({...e,...t});return(0,i.N)({queryKey:n,queryFn:e=>{let{pageParam:t}=e;return a(t)},getNextPageParam:e=>{var t,n;if(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.last)return null;let i=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.number)+1;return{page:i+1}},...t})},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.Z.adminItemPacks.list(e).queryKey,i=()=>o(e);return(0,a.a)({queryKey:n,queryFn:i,...t})},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.Z.adminItemPacks.export(e).queryKey,i=()=>s(e),r={...t};return(0,a.a)({queryKey:n,queryFn:i,...r})},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.Z.adminItemPacks.detail(e).queryKey,i=()=>d(e);return(0,a.a)({queryKey:n,queryFn:i,...t})},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.D)(t=>u(t,e))},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.D)(n=>c(e,n,t))}},60710:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ev}});var i=n(85893),a=n(67294),r=n(35937),l=n.n(r),o=n(69417),s=n(69368),d=n(8168),u=n(86886),c=n(67686);n(63850);var p=n(35823),m=n.n(p),h=n(79878),v=n(29180);let x=e=>v.Z.get("admin/item-packs-inventories",{params:e}),g=e=>v.Z.put("admin/item-packs-inventories",e),f=()=>v.Z.get("/admin/item-packs-inventories/import/template"),Z=e=>v.Z.post("/admin/item-packs-inventories/import/preview",e,{headers:{"Content-Type":"multipart/form-data"}}),y=e=>v.Z.post("/admin/item-packs-inventories/import",e,{headers:{"Content-Type":"multipart/form-data"}});var j=n(36492),b=n(48228),P=n(81820);let k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=P.Z.adminItemPacksInventories.list(e).queryKey,i=()=>x(e);return(0,j.a)({queryKey:n,queryFn:i,...t})},C=()=>(0,b.D)(e=>{let{body:t}=e;return g(t)}),M=()=>(0,b.D)(e=>Z(e)),I=()=>(0,b.D)(e=>y(e));var S=n(50657),w=n(31425),T=n(6514),N=n(16628),D=n(93946),_=n(15861),E=n(90948),B=n(66476);let O=(0,E.ZP)(D.Z)(e=>{let{theme:t}=e;return{top:0,right:0,color:"grey.500",position:"absolute",boxShadow:t.shadows[2],transform:"translate(10px, -10px)",borderRadius:t.shape.borderRadius,backgroundColor:"".concat(t.palette.background.paper," !important"),transition:"transform 0.25s ease-in-out, box-shadow 0.25s ease-in-out","&:hover":{transform:"translate(7px, -5px)"}}}),L=(0,a.forwardRef)(function(e,t){return(0,i.jsx)(N.Z,{ref:t,...e})}),A=e=>{let{show:t=!1,title:n="Import CSV",onClickClose:a,setDataPreview:r,setShow:l,SetIsShowPreview:s,file:d,setFile:u}=e,c=()=>{a&&a()},{mutate:p}=M(),v=async e=>{e.preventDefault();let t=new FormData;t.append("file",d),p(t,{onSuccess:e=>{(null==e?void 0:e.data)&&r(null==e?void 0:e.data)}}),l(!1),s(!0)},x=async()=>{let{data:e}=await f();e&&m()(e,"Sample CSV.csv")},g=e=>{u(e.target.files[0])};return(0,i.jsx)(S.Z,{fullWidth:!0,open:t,maxWidth:"sm",scroll:"body",onClose:c,TransitionComponent:L,sx:{"& .MuiDialog-paper":{overflow:"visible"}},children:(0,i.jsxs)("form",{onSubmit:v,encType:"multipart/form-data",children:[(0,i.jsxs)(T.Z,{children:[(0,i.jsx)(O,{onClick:c,children:(0,i.jsx)(h.Z,{icon:"tabler:x",fontSize:"1.25rem"})}),(0,i.jsx)(_.Z,{variant:"h6",children:n}),(0,i.jsx)(B.Z,{type:"file",onChange:g})]}),(0,i.jsxs)(w.Z,{children:[(0,i.jsx)(o.Z,{variant:"tonal",color:"secondary",onClick:x,children:"download template"}),(0,i.jsx)(o.Z,{variant:"contained",sx:{mr:1},type:"submit",children:"submit"})]})]})})};var Q=n(72882),z=n(7906),F=n(295),H=n(53816),R=n(53252),W=n(90629);let q=(0,E.ZP)(D.Z)(e=>{let{theme:t}=e;return{top:0,right:0,color:"grey.500",position:"absolute",boxShadow:t.shadows[2],transform:"translate(10px, -10px)",borderRadius:t.shape.borderRadius,backgroundColor:"".concat(t.palette.background.paper," !important"),transition:"transform 0.25s ease-in-out, box-shadow 0.25s ease-in-out","&:hover":{transform:"translate(7px, -5px)"}}}),V=(0,a.forwardRef)(function(e,t){return(0,i.jsx)(N.Z,{ref:t,...e})}),X=e=>{let{show:t=!1,title:n="Preview",onClickClose:a,setShow:r,data:l,file:s}=e,d=()=>{r&&r(!1),a&&a()},{mutate:c}=I(),p=async e=>{e.preventDefault();let t=new FormData;t.append("file",s),c(t,{onSuccess:e=>{(null==e?void 0:e.data)&&r(!1)}})};return(0,i.jsxs)(S.Z,{fullWidth:!0,open:t,maxWidth:"sm",scroll:"body",onClose:d,TransitionComponent:V,sx:{"& .MuiDialog-paper":{overflow:"visible"}},children:[(0,i.jsxs)(T.Z,{children:[(0,i.jsx)(q,{onClick:d,children:(0,i.jsx)(h.Z,{icon:"tabler:x",fontSize:"1.25rem"})}),(0,i.jsx)(_.Z,{variant:"h6",children:n}),(0,i.jsx)(u.ZP,{container:!0,justifyContent:"center",children:(0,i.jsx)(Q.Z,{component:W.Z,sx:{maxHeight:300},children:(0,i.jsx)(z.Z,{stickyHeader:!0,"aria-label":"sticky table",children:(0,i.jsxs)(F.Z,{children:[(0,i.jsxs)(H.Z,{hover:!0,children:[(0,i.jsx)(R.Z,{align:"center",children:"品名"}),(0,i.jsx)(R.Z,{align:"center",children:"倉庫"}),(0,i.jsx)(R.Z,{align:"center",children:"システム"})]}),null==l?void 0:l.map((e,t)=>{var n;return(0,i.jsxs)(H.Z,{hover:!0,children:[(0,i.jsx)(R.Z,{align:"center",children:(0,i.jsxs)("p",{children:[null==e?void 0:e.unitQtyOnPack," ",null==e?void 0:null===(n=e.item)||void 0===n?void 0:n.name]})}),(0,i.jsx)(R.Z,{align:"center",children:(0,i.jsxs)("p",{children:[" ",null==e?void 0:e.oldStockPackQty]})}),(0,i.jsx)(R.Z,{align:"center",children:(0,i.jsx)("p",{children:null==e?void 0:e.stockPackQty})})]},t)})]})})})}),(0,i.jsx)(_.Z,{variant:"h6",style:{marginTop:"10px"},children:"在庫数に差があります。 倉庫の数値に上書きしますか?"})]}),(0,i.jsxs)(w.Z,{children:[(0,i.jsx)(o.Z,{variant:"tonal",color:"secondary",onClick:d,children:"No"}),(0,i.jsx)(o.Z,{variant:"contained",sx:{mr:1},onClick:p,children:"Yes"})]})]})},K=e=>{let{setParams:t}=e,[n,r]=(0,a.useState)({name:"",isTheoreticalPackQtyNegative:!1}),[p,m]=(0,a.useState)(!1),[h,v]=(0,a.useState)(!1),[x,g]=(0,a.useState)([]),[f,Z]=(0,a.useState)(null),y=e=>{var i,a;null==e||e.preventDefault();let r=l()({name:null==n?void 0:null===(i=n.name)||void 0===i?void 0:null===(a=i.item)||void 0===a?void 0:a.name,isTheoreticalPackQtyNegative:null==n?void 0:n.isTheoreticalPackQtyNegative},e=>!!e)||{};t(r)},j=()=>{m(!0)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.ZP,{container:!0,spacing:5,padding:"24px",justifyContent:"center",children:[(0,i.jsxs)(u.ZP,{item:!0,container:!0,spacing:5,alignItems:"flex-end",children:[(0,i.jsx)(u.ZP,{item:!0,lg:7,md:6,xs:12,children:(0,i.jsx)(c.Z,{label:"品名",onChange:e=>{r({...n,name:e})},value:null==n?void 0:n.name,defaultValue:null==n?void 0:n.name})}),(0,i.jsx)(u.ZP,{item:!0,lg:3,md:4,xs:12,children:(0,i.jsx)(d.Z,{label:"理論在庫マイナスの商品",control:(0,i.jsx)(s.Z,{checked:null==n?void 0:n.isTheoreticalPackQtyNegative,onChange:()=>r({...n,isTheoreticalPackQtyNegative:!(null==n?void 0:n.isTheoreticalPackQtyNegative)})})})}),(0,i.jsx)(u.ZP,{item:!0,lg:2,md:2,xs:12,children:(0,i.jsx)(o.Z,{variant:"contained",color:"info",onClick:j,children:"CSV取込"})})]}),(0,i.jsx)(u.ZP,{item:!0,container:!0,xs:12,justifyContent:"center",children:(0,i.jsx)(u.ZP,{item:!0,xs:2,children:(0,i.jsx)(o.Z,{fullWidth:!0,color:"warning",variant:"contained",onClick:y,children:"検索"})})})]}),(0,i.jsx)(A,{show:p,setShow:m,onClickClose:()=>m(!1),setDataPreview:g,SetIsShowPreview:v,file:f,setFile:Z}),(0,i.jsx)(X,{data:x,show:h,setShow:v,file:f})]})};var G=n(41664),Y=n.n(G),U=n(85945),$=n(50361),J=n.n($),ee=n(57632),et=n(74368),en=n(4431),ei=n(89825),ea=n(70519),er=n(53184),el=n(2734),eo=n(53198),es=[{id:"product-name",label:"品名",width:200,align:"center"},{id:"blank",label:" ",width:100,align:"center"},{id:"internal-capacity",label:"内容量",width:200,align:"center"},{id:"number of packs",label:"パック数",width:200,align:"center"},{id:"quantity",label:"入数",width:200,align:"center"},{id:"actual inventory",label:"実在庫数",width:200,align:"center"},{id:"number of orders",label:"発注数",width:200,align:"center"},{id:"number of allocations",label:"引当数",width:200,align:"center"},{id:"theoretical inventory",label:"理論在庫数",width:200,align:"center"}];let ed=e=>{let{params:t}=e,n=(0,U.NL)(),[r,l]=(0,a.useState)(10),[s,d]=(0,a.useState)(0),[c,p]=(0,a.useState)([]),[m,h]=(0,a.useState)(!1),[v,x]=(0,a.useState)([]),g={page:s+1,size:r,...(null==t?void 0:t.name)&&{name:null==t?void 0:t.name},...(null==t?void 0:t.isTheoreticalPackQtyNegative)&&{isTheoreticalPackQtyNegative:null==t?void 0:t.isTheoreticalPackQtyNegative}},{data:f,isFetching:Z}=k(g),y=null==f?void 0:f.data,j=(null==y?void 0:y.content)||[],b=null==y?void 0:y.totalElements,{mutate:M}=C(),I=(e,t)=>{d(t)},S=e=>{l(+e.target.value),d(0)},w=async()=>{h(!0);let e=null==v?void 0:v.filter((e,t)=>{var n;return parseFloat((null==e?void 0:e.stockPackQty)||0)!==(null==c?void 0:null===(n=c[t])||void 0===n?void 0:n.stockPackQty)});(null==e?void 0:e.length)!=0&&(null==e||e.map(async e=>{let t=null==e?void 0:e.id;if(t){let n=[{id:t,stockPackQty:null==e?void 0:e.stockPackQty}];await M({body:n})}}),await Promise.all(v),h(!1))};return(0,a.useEffect)(()=>{var e;if(!f||Z)return;let t=P.Z.adminItemPacksInventories.list(g).queryKey,i=n.getQueryData(t);n.setQueryData(t,()=>{var e;if(!i)return;let t=J()(i);return t.data.content=null===(e=t.data.content)||void 0===e?void 0:e.map(e=>(null==e?void 0:e.uuid)?e:{uuid:(0,ee.Z)(),...e}),t});let a=null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.content;p(a)},[j,Z]),(0,a.useEffect)(()=>()=>{n.removeQueries(P.Z.adminItemPacksInventories._def)},[]),(0,i.jsxs)(W.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,i.jsx)(Q.Z,{children:(0,i.jsxs)(z.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,i.jsx)(er.Z,{children:(0,i.jsx)(H.Z,{children:es.map(e=>(0,i.jsx)(R.Z,{style:{width:null==e?void 0:e.width},align:null==e?void 0:e.align,children:e.label},e.id))})}),(0,i.jsx)(F.Z,{children:Z?(0,i.jsx)(eo.Z,{rowsNum:10,cellsNum:9}):(null==j?void 0:j.length)==0?(0,i.jsx)(H.Z,{children:(0,i.jsx)(R.Z,{colSpan:null==es?void 0:es.length,align:"center",children:"「該当する品目はありません。」"})}):null==j?void 0:j.map(e=>{let t=(null==v?void 0:v.find(t=>(null==t?void 0:t.uuid)===(null==e?void 0:e.uuid)))||e;return(0,i.jsx)(eu,{row:t,editedInvetoriesList:v,setEditedInventoriesList:x,inventoryList:c},null==e?void 0:e.uuid)})})]})}),(0,i.jsx)(ea.Z,{rowsPerPageOptions:[5,10,15],component:"div",count:b,rowsPerPage:r,page:s,onPageChange:I,onRowsPerPageChange:S,labelRowsPerPage:"表示件数"}),(0,i.jsx)(u.ZP,{item:!0,container:!0,xs:12,justifyContent:"center",padding:"24px",children:(0,i.jsx)(u.ZP,{item:!0,xs:2,children:(0,i.jsx)(o.Z,{fullWidth:!0,color:"success",variant:"contained",onClick:w,disabled:m,children:"登録"})})})]})},eu=e=>{var t;let{row:n,editedInvetoriesList:a,setEditedInventoriesList:r,inventoryList:l}=e,{palette:o}=(0,el.Z)(),{uuid:s,item:d,unitQtyOnPack:c,serveOnPack:p,packQtyOnBox:m,stockPackQty:h,processPackQty:v,allocatedPackQty:x,theoreticalPackQty:g}=n||{},f=(e,t,n)=>{if(e>=0){t[e]=n,r(t);return}r(t=[...t,n])},Z=e=>{let{isClickPlus:t,isClickMinus:n,newData:i,inputValue:a}=e,r=parseFloat(i.stockPackQty);return t?r+1:n?r-1:a},y=e=>{let{inputValue:t,isClickPlus:n,isClickMinus:i}=e,r=J()(a),o=J()(l),d=(null==r?void 0:r.find(e=>(null==e?void 0:e.uuid)===s))||(null==o?void 0:o.find(e=>(null==e?void 0:e.uuid)===s)),u=Z({isClickPlus:n,isClickMinus:i,newData:d,inputValue:t});d.stockPackQty=u;let c=null==a?void 0:a.findIndex(e=>(null==e?void 0:e.uuid)===s);f(c,r,d)};return(0,i.jsxs)(H.Z,{hover:!0,children:[(0,i.jsx)(R.Z,{align:"center",children:(0,i.jsx)(Y(),{target:"_blank",href:{pathname:"/item-packs/".concat(null==n?void 0:n.id,"/")},children:(0,i.jsx)("p",{style:{color:o.primary.main},children:null==d?void 0:d.name})})}),(0,i.jsx)(R.Z,{align:"center",children:null==d?void 0:null===(t=d.course)||void 0===t?void 0:t.name}),(0,i.jsx)(R.Z,{align:"center",children:c}),(0,i.jsx)(R.Z,{align:"center",children:p}),(0,i.jsx)(R.Z,{align:"center",children:m}),(0,i.jsx)(R.Z,{align:"center",children:(0,i.jsxs)(u.ZP,{container:!0,alignItems:"center",justifyContent:"center",children:[(0,i.jsx)(u.ZP,{item:!0,xs:8,children:(0,i.jsx)(B.Z,{fullWidth:!0,type:"number",inputProps:{style:{textAlign:"center"}},defaultValue:h,value:h,onChange:e=>y({inputValue:e.target.value})})}),(0,i.jsxs)(u.ZP,{children:[(0,i.jsx)(u.ZP,{item:!0,children:(0,i.jsx)(D.Z,{onClick:()=>y({isClickPlus:!0}),children:(0,i.jsx)(en.Z,{fontSize:"small"})})}),(0,i.jsx)(u.ZP,{item:!0,children:(0,i.jsx)(D.Z,{onClick:()=>y({isClickMinus:!0}),children:(0,i.jsx)(ei.Z,{fontSize:"small"})})})]})]})}),(0,i.jsx)(R.Z,{align:"center",children:v}),(0,i.jsx)(R.Z,{align:"center",children:(0,et.hN)(x)}),(0,i.jsx)(R.Z,{align:"center",children:(0,et.hN)(g)})]})};var ec=n(66242),ep=n(44267),em=n(78445);let eh=()=>{let[e,t]=(0,a.useState)({});return(0,i.jsx)(u.ZP,{container:!0,spacing:6,children:(0,i.jsx)(u.ZP,{item:!0,xs:12,children:(0,i.jsxs)(ec.Z,{children:[(0,i.jsx)(em.Z,{title:"在庫管理ページ"}),(0,i.jsxs)(ep.Z,{sx:{p:0,"&:last-child":{pb:0}},children:[(0,i.jsx)(K,{setParams:t}),(0,i.jsx)(ed,{params:e})]})]})})})};var ev=eh}},function(e){e.O(0,[8360,7851,8271,2288,6682,6261,6644,7064,7815,7206,361,5643,2584,5648,9774,2888,179],function(){return e(e.s=29788)}),_N_E=e.O()}]);