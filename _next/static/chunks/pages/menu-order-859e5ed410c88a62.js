(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3212],{78445:function(e,i,n){"use strict";n.d(i,{Z:function(){return S}});var t=n(63366),l=n(87462),o=n(67294),r=n(63961),a=n(94780),d=n(15861),u=n(71657),s=n(90948),c=n(1588),v=n(34867);function m(e){return(0,v.Z)("MuiCardHeader",e)}let h=(0,c.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var p=n(85893);let x=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],g=e=>{let{classes:i}=e;return(0,a.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},m,i)},Z=(0,s.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,i)=>(0,l.Z)({[`& .${h.title}`]:i.title,[`& .${h.subheader}`]:i.subheader},i.root)})({display:"flex",alignItems:"center",padding:16}),f=(0,s.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,i)=>i.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),y=(0,s.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,i)=>i.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),j=(0,s.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,i)=>i.content})({flex:"1 1 auto"}),b=o.forwardRef(function(e,i){let n=(0,u.Z)({props:e,name:"MuiCardHeader"}),{action:o,avatar:a,className:s,component:c="div",disableTypography:v=!1,subheader:m,subheaderTypographyProps:h,title:b,titleTypographyProps:S}=n,C=(0,t.Z)(n,x),w=(0,l.Z)({},n,{component:c,disableTypography:v}),P=g(w),F=b;null==F||F.type===d.Z||v||(F=(0,p.jsx)(d.Z,(0,l.Z)({variant:a?"body2":"h5",className:P.title,component:"span",display:"block"},S,{children:F})));let k=m;return null==k||k.type===d.Z||v||(k=(0,p.jsx)(d.Z,(0,l.Z)({variant:a?"body2":"body1",className:P.subheader,color:"text.secondary",component:"span",display:"block"},h,{children:k}))),(0,p.jsxs)(Z,(0,l.Z)({className:(0,r.Z)(P.root,s),as:c,ref:i,ownerState:w},C,{children:[a&&(0,p.jsx)(f,{className:P.avatar,ownerState:w,children:a}),(0,p.jsxs)(j,{className:P.content,ownerState:w,children:[F,k]}),o&&(0,p.jsx)(y,{className:P.action,ownerState:w,children:o})]}))});var S=b},26280:function(e,i,n){"use strict";n.d(i,{Z:function(){return C}});var t=n(63366),l=n(87462),o=n(94780),r=n(63961),a=n(67294),d=n(82607),u=n(88169),s=n(85893),c=(0,u.Z)((0,s.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),v=n(90948),m=n(71657),h=n(98216),p=n(1588),x=n(34867);function g(e){return(0,x.Z)("MuiTableSortLabel",e)}let Z=(0,p.Z)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),f=["active","children","className","direction","hideSortIcon","IconComponent"],y=e=>{let{classes:i,direction:n,active:t}=e,l={root:["root",t&&"active"],icon:["icon",`iconDirection${(0,h.Z)(n)}`]};return(0,o.Z)(l,g,i)},j=(0,v.ZP)(d.Z,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,i)=>{let{ownerState:n}=e;return[i.root,n.active&&i.active]}})(({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(e.vars||e).palette.text.secondary},"&:hover":{color:(e.vars||e).palette.text.secondary,[`& .${Z.icon}`]:{opacity:.5}},[`&.${Z.active}`]:{color:(e.vars||e).palette.text.primary,[`& .${Z.icon}`]:{opacity:1,color:(e.vars||e).palette.text.secondary}}})),b=(0,v.ZP)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,i)=>{let{ownerState:n}=e;return[i.icon,i[`iconDirection${(0,h.Z)(n.direction)}`]]}})(({theme:e,ownerState:i})=>(0,l.Z)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none"},"desc"===i.direction&&{transform:"rotate(0deg)"},"asc"===i.direction&&{transform:"rotate(180deg)"})),S=a.forwardRef(function(e,i){let n=(0,m.Z)({props:e,name:"MuiTableSortLabel"}),{active:o=!1,children:a,className:d,direction:u="asc",hideSortIcon:v=!1,IconComponent:h=c}=n,p=(0,t.Z)(n,f),x=(0,l.Z)({},n,{active:o,direction:u,hideSortIcon:v,IconComponent:h}),g=y(x);return(0,s.jsxs)(j,(0,l.Z)({className:(0,r.Z)(g.root,d),component:"span",disableRipple:!0,ownerState:x,ref:i},p,{children:[a,v&&!o?null:(0,s.jsx)(b,{as:h,className:(0,r.Z)(g.icon),ownerState:x})]}))});var C=S},13113:function(e,i){"use strict";i.Z={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"}},63012:function(e,i,n){var t=n(97786),l=n(10611),o=n(71811);e.exports=function(e,i,n){for(var r=-1,a=i.length,d={};++r<a;){var u=i[r],s=t(e,u);n(s,u)&&l(d,o(u,e),s)}return d}},10611:function(e,i,n){var t=n(34865),l=n(71811),o=n(65776),r=n(13218),a=n(40327);e.exports=function(e,i,n,d){if(!r(e))return e;i=l(i,e);for(var u=-1,s=i.length,c=s-1,v=e;null!=v&&++u<s;){var m=a(i[u]),h=n;if("__proto__"===m||"constructor"===m||"prototype"===m)break;if(u!=c){var p=v[m];void 0===(h=d?d(p,m,v):void 0)&&(h=r(p)?p:o(i[u+1])?[]:{})}t(v,m,h),v=v[m]}return e}},35937:function(e,i,n){var t=n(29932),l=n(67206),o=n(63012),r=n(46904);e.exports=function(e,i){if(null==e)return{};var n=t(r(e),function(e){return[e]});return i=l(i),o(e,n,function(e,n){return i(e,n[0])})}},45201:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/menu-order",function(){return n(21481)}])},97065:function(e,i,n){"use strict";var t=n(85893),l=n(67294),o=n(41609),r=n.n(o),a=n(24697),d=n(74368),u=n(7323),s=n(66476),c=n(36822),v=n(84962);let m=e=>{let{error:i,helperText:n,defaultValue:o={},value:m={id:"",name:""},onChange:h,label:p="施設名",disabled:x,selectorSelectedKey:g="name",additionalParams:Z={}}=e,[f,y]=(0,l.useState)(""),[j]=(0,a.Nr)(f,300),b={page:1,size:5,[g]:j,...Z};r()(b.name)&&delete b.name;let{data:S,fetchNextPage:C,hasNextPage:w,isFetchingNextPage:P}=(0,u.uv)(b,{select:e=>{var i;return null==e?void 0:null===(i=e.pages)||void 0===i?void 0:i.flatMap(e=>{var i;return null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.content})}}),F=e=>{let i=e.currentTarget;(0,d.U2)(i,30,async()=>{w&&(P||C())})},k=(e,i,n)=>{e&&"blur"===e.type?y(""):"reset"!==n&&y(i)},T=e=>null==e?void 0:e[g];return(0,t.jsx)(v.Z,{options:S||[],getOptionLabel:e=>T(e)||"",id:"dropdownCustomerFacilities",onInputChange:k,onChange:(e,i)=>h(i),disabled:x,renderInput:e=>(0,t.jsx)(s.Z,{...e,label:p,error:i,helperText:n}),renderOption:(e,i)=>(0,l.createElement)(c.Z,{...e,component:"li",key:null==i?void 0:i.id},T(i)||""),ListboxProps:{onScroll:F,style:{maxHeight:150}},defaultValue:o,value:m})};i.Z=m},18055:function(e,i,n){"use strict";n.d(i,{WJ:function(){return x},dj:function(){return m},aV:function(){return v},Dq:function(){return h},WB:function(){return p}});var t=n(36492),l=n(48228),o=n(29180);let r=e=>o.Z.get("admin/customers",{params:e}),a=e=>o.Z.get("admin/customers/export",{params:e}),d=(e,i)=>o.Z.get("admin/customers/".concat(e),{params:i}),u=e=>o.Z.post("admin/customers",e),s=(e,i)=>o.Z.put("admin/customers/".concat(e),i);var c=n(81820);let v=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c.Z.adminCustomers.list(e).queryKey,l=()=>r(e),o={...i};return(0,t.a)({queryKey:n,queryFn:l,...o})},m=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c.Z.adminCustomers.export(e).queryKey,l=()=>a(e),o={...i};return(0,t.a)({queryKey:n,queryFn:l,...o})},h=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c.Z.adminCustomers.detail(e).queryKey,l=()=>d(e),o={...i};return(0,t.a)({queryKey:n,queryFn:l,...o})},p=()=>(0,l.D)(e=>u(e)),x=e=>(0,l.D)(i=>s(e,i))},85077:function(e,i,n){"use strict";n.d(i,{g:function(){return u},S:function(){return d}});var t=n(59403),l=n(36492),o=n(29180);let r=e=>o.Z.get("admin/time-sections",{params:e});var a=n(81820);let d=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.Z.adminTimeSections.list(e).queryKey,l=i=>r({...e,page:i});return(0,t.N)({queryKey:n,queryFn:e=>{let{pageParam:i}=e;return l(i)},getNextPageParam:e=>{var i,n;if(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.last)return null;let t=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.number)+1;return t+1},...i})},u=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.Z.adminTimeSections.list(e).queryKey,t=()=>r(e),o={...i};return(0,l.a)({queryKey:n,queryFn:t,...o})}},21481:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return eg}});var t=n(85893),l=n(67294),o=n(11163),r=n(35937),a=n.n(r),d=n(9198),u=n.n(d),s=n(27484),c=n.n(s),v=n(86874),m=n(74368),h=n(66476),p=n(69417),x=n(69368),g=n(8168),Z=n(86886),f=n(97065);let y=(0,l.forwardRef)((e,i)=>(0,t.jsx)(h.Z,{...e,inputRef:i,label:null==e?void 0:e.label,autoComplete:"off"}));y.displayName="CustomDateInput";let j=e=>{let{handleSetFilterApplied:i,customerFacilityId:n,customerFacility:o}=e,[r,a]=(0,l.useState)({requireAtFrom:m.cB,requireAtTo:m.Kd,customerFacility:{},isFacilityNotPurchase:!1}),d=e=>i=>{var n,t;let l={requireAtFrom:i,requireAtTo:i,timeZone:null==i?void 0:null===(n=i.target)||void 0===n?void 0:n.value,isFacilityNotPurchase:null==i?void 0:null===(t=i.target)||void 0===t?void 0:t.checked,customerFacility:i},o=null==l?void 0:l[e];a({...r,[e]:o})};return console.log("new",c()(null==r?void 0:r.requireAtFrom).format("YYYY-MM-DD")),(0,t.jsxs)(Z.ZP,{container:!0,spacing:5,paddingTop:"24px",padding:"0 24px",justifyContent:"center",children:[(0,t.jsxs)(Z.ZP,{item:!0,container:!0,spacing:5,alignItems:"flex-end",children:[(0,t.jsx)(Z.ZP,{item:!0,md:5.825,xs:12,children:(0,t.jsx)(v.Z,{children:(0,t.jsx)(u(),{dateFormat:"yyyy/MM/dd",id:"requireAtFrom",showYearDropdown:!0,showMonthDropdown:!0,selected:null==r?void 0:r.requireAtFrom,placeholderText:"YYYY/MM/DD",onChange:d("requireAtFrom"),customInput:(0,t.jsx)(y,{fullWidth:!0,label:"献立日"})})})}),(0,t.jsx)(Z.ZP,{item:!0,lg:.35,md:.35,marginBottom:1,display:{xs:"none",lg:"block",md:"block"},children:"〜"}),(0,t.jsx)(Z.ZP,{item:!0,md:5.825,xs:12,children:(0,t.jsx)(v.Z,{children:(0,t.jsx)(u(),{dateFormat:"yyyy/MM/dd",id:"requireAtTo",showYearDropdown:!0,showMonthDropdown:!0,selected:null==r?void 0:r.requireAtTo,placeholderText:"YYYY/MM/DD",onChange:d("requireAtTo"),customInput:(0,t.jsx)(y,{fullWidth:!0})})})})]}),(0,t.jsxs)(Z.ZP,{item:!0,container:!0,spacing:5,alignItems:"flex-end",children:[(0,t.jsx)(Z.ZP,{item:!0,lg:3.825,md:12,xs:12,children:n?(0,t.jsx)(h.Z,{label:"施設名",disabled:!0,value:null==o?void 0:o.name,fullWidth:!0}):(0,t.jsx)(f.Z,{defaultValue:null==r?void 0:r.customerFacility,value:null==r?void 0:r.customerFacility,onChange:d("customerFacility")})}),(0,t.jsx)(Z.ZP,{item:!0,lg:.35,display:{md:"none",xs:"none",lg:"block"}}),(0,t.jsx)(Z.ZP,{item:!0,lg:3.825,md:12,xs:12,children:(0,t.jsx)(g.Z,{label:"一つも注文が入っていない施設",control:(0,t.jsx)(x.Z,{checked:null==r?void 0:r.isFacilityNotPurchase,onChange:d("isFacilityNotPurchase"),name:"isFacilityNotPurchase"})})})]}),(0,t.jsx)(Z.ZP,{item:!0,container:!0,xs:12,justifyContent:"center",children:(0,t.jsx)(Z.ZP,{xs:2,children:(0,t.jsx)(p.Z,{fullWidth:!0,color:"warning",variant:"contained",onClick:()=>i(r),children:"検索"})})})]})};var b=n(85945),S=n(41609),C=n.n(S),w=n(57632),P=n(26725),F=n(81820),k=n(36492),T=n(48228);n(96486);var A=n(29180);let q=e=>A.Z.get("admin/customer-purchase-menus",{params:e}),M=e=>A.Z.post("admin/customer-purchase-menus",e),N=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=F.Z.adminCustomerPurchaseMenus.list(e).queryKey,t=()=>{let i=new URLSearchParams;return Object.keys(e).forEach(n=>{"sort"===n?e[n].forEach(e=>{i.append(n,e)}):i.append(n,e[n])}),q(i)},l={...i};return(0,k.a)({queryKey:n,queryFn:t,...l})},R=()=>(0,T.D)(e=>M(e));var D=n(85077),I=n(36822),_=n(15861),L=n(39390),E=n(69769),Y=n(29244),z=n(87361),H=n(42096),O=n(93946),G=n(7906),Q=n(295),K=n(53252),W=n(72882),B=n(53184),V=n(53816),$=n(26280),U=n(13113),X=n(45679),J=n(4431),ee=n(89825),ei=n(63042),en=n(56805);let et=(0,X.Z)({input:{"& input[type=number]":{"-moz-appearance":"textfield"},"& input[type=number]::-webkit-outer-spin-button":{"-webkit-appearance":"none",margin:0},"& input[type=number]::-webkit-inner-spin-button":{"-webkit-appearance":"none",margin:0}}}),el={padding:"0 16px",border:"0"},eo=(0,l.memo)(e=>{var i,n,l,o,r,a,d,u,s,c,v,m,x,g,f,y,j,b,S,C,w,P,F,k,T,A,q,M,N;let{isFirstRow:R,isLastRow:D,row:L,idx:E,onChangeTotalServe:Y,onClickPlusMinus:z,onChangeTimeSection:H,onChangeCourse:G,onChangeProduct:Q,onClickAppend:W}=e,B=et(),{uuid:$,requireAt:U,timeSection:X,items:eo,totalServeQtyGlobal:er}=L;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(V.Z,{hover:!0,children:[(0,t.jsx)(K.Z,{padding:"none",sx:el,children:R?U:""}),(0,t.jsx)(K.Z,{padding:"none",sx:el,children:R&&(0,t.jsxs)(I.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(_.Z,{sx:{marginRight:"8px"},children:null==X?void 0:X.name}),(0,t.jsx)(p.Z,{variant:"contained",color:"success",onClick:()=>H($),size:"small",children:"変更"})]})}),(0,t.jsx)(K.Z,{padding:"none",sx:el,align:"center",children:void 0!==(null==eo?void 0:eo[E])&&(0,t.jsx)(ei.Z,{defaultValue:{id:null==eo?void 0:null===(i=eo[E])||void 0===i?void 0:null===(n=i.item)||void 0===n?void 0:null===(l=n.course)||void 0===l?void 0:l.id,name:null==eo?void 0:null===(o=eo[E])||void 0===o?void 0:null===(r=o.item)||void 0===r?void 0:null===(a=r.course)||void 0===a?void 0:a.name},value:{id:null==eo?void 0:null===(d=eo[E])||void 0===d?void 0:null===(u=d.item)||void 0===u?void 0:null===(s=u.course)||void 0===s?void 0:s.id,name:null==eo?void 0:null===(c=eo[E])||void 0===c?void 0:null===(v=c.item)||void 0===v?void 0:null===(m=v.course)||void 0===m?void 0:m.name},onChange:e=>G($,e,E),id:"items-".concat($)})}),(0,t.jsx)(K.Z,{padding:"none",sx:el,align:"center",children:void 0!==(null==eo?void 0:eo[E])&&(0,t.jsx)(en.Z,{defaultValue:{id:null==eo?void 0:null===(x=eo[E])||void 0===x?void 0:null===(g=x.item)||void 0===g?void 0:g.id,name:null==eo?void 0:null===(f=eo[E])||void 0===f?void 0:null===(y=f.item)||void 0===y?void 0:y.name},value:{id:null==eo?void 0:null===(j=eo[E])||void 0===j?void 0:null===(b=j.item)||void 0===b?void 0:b.id,name:null==eo?void 0:null===(S=eo[E])||void 0===S?void 0:null===(C=S.item)||void 0===C?void 0:C.name},onChange:e=>Q($,e,E),id:"productName-".concat(E),withAdditionalParams:!0,additionalParams:(null==eo?void 0:null===(w=eo[E])||void 0===w?void 0:null===(P=w.item)||void 0===P?void 0:null===(F=P.course)||void 0===F?void 0:F.id)?{courseId:null==eo?void 0:null===(k=eo[E])||void 0===k?void 0:null===(T=k.item)||void 0===T?void 0:null===(A=T.course)||void 0===A?void 0:A.id,type:"NORMAL"}:null,disabled:null==eo||null===(q=eo[E])||void 0===q||null===(M=q.item)||void 0===M||null===(N=M.course)||void 0===N||!N.id})}),(0,t.jsx)(K.Z,{padding:"none",sx:el,children:R&&(0,t.jsxs)(Z.ZP,{container:!0,spacing:2,justifyContent:"right",alignItems:"center",children:[(0,t.jsx)(Z.ZP,{item:!0,xs:8,children:(0,t.jsx)(h.Z,{fullWidth:!0,type:"number",inputProps:{style:{textAlign:"center"}},value:er,defaultValue:er,id:"totalServeQtyGlobal",onChange:e=>Y($,e.target.value),className:B.input})}),(0,t.jsx)(Z.ZP,{item:!0,children:"食"})]})}),(0,t.jsx)(K.Z,{padding:"none",sx:el,children:(0,t.jsxs)(Z.ZP,{container:!0,justifyContent:"right",alignItems:"center",minHeight:"70px",children:[(0,t.jsx)(Z.ZP,{item:!0,children:R&&(0,t.jsx)(O.Z,{onClick:()=>z($,!0),children:(0,t.jsx)(J.Z,{fontSize:"small"})})}),(0,t.jsx)(Z.ZP,{item:!0,children:R&&(0,t.jsx)(O.Z,{onClick:()=>z($,!1),children:(0,t.jsx)(ee.Z,{fontSize:"small"})})})]})})]}),D&&(0,t.jsxs)(V.Z,{children:[(0,t.jsx)(K.Z,{colSpan:2,align:"center"}),(0,t.jsx)(K.Z,{colSpan:2,align:"center",children:(0,t.jsx)(p.Z,{fullWidth:!0,onClick:()=>W($),children:(0,t.jsx)(J.Z,{fontSize:"medium"})})}),(0,t.jsx)(K.Z,{colSpan:2,align:"center"})]})]})});eo.displayName="MenuRow";var er=[{id:"requireAt",label:"献立日",withSort:!1,width:200},{id:"timeSection.name",label:"時間帯",withSort:!1,width:200},{id:"items.item.course.name",label:"カテゴリー",align:"center",withSort:!1,width:250},{id:"items.item.name",label:"品名",align:"center",withSort:!1,width:250},{id:"totalServeQtyGlobal",label:"注文数",align:"center",withSort:!1,width:200},{id:"action",label:"",align:"center",withSort:!1,width:100}];let ea=(0,l.memo)(e=>{let{filteredOrderList:i,onChangeTotalServe:n,onClickPlusMinus:o,onChangeTimeSection:r,onChangeCourse:a,onChangeProduct:d,onClickAppend:u}=e,[s,c]=(0,l.useState)("desc"),[v,m]=(0,l.useState)(""),h=e=>{c(v===e&&"asc"===s?"desc":"asc"),m(e)};return(0,t.jsx)(W.Z,{children:(0,t.jsxs)(G.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,t.jsx)(B.Z,{children:(0,t.jsx)(V.Z,{children:er.map(e=>(0,t.jsx)(K.Z,{align:e.align,style:{width:null==e?void 0:e.width},children:(null==e?void 0:e.withSort)?(0,t.jsxs)($.Z,{active:v===e.id,direction:v===e.id?s:"asc",onClick:()=>h(e.id),children:[e.label,v===e.id?(0,t.jsx)(I.Z,{component:"span",sx:U.Z,children:"desc"===s?"sorted descending":"sorted ascending"}):null]}):e.label},e.id))})}),(0,t.jsx)(Q.Z,{children:(null==i?void 0:i.length)===0?(0,t.jsx)(V.Z,{children:(0,t.jsx)(K.Z,{colSpan:null==er?void 0:er.length,align:"center",children:"「該当する品目はありません。」"})}):null==i?void 0:i.map((e,i)=>{var l;return null==e?void 0:null===(l=e.items)||void 0===l?void 0:l.map((l,s)=>{var c;let v=s==(null==e?void 0:null===(c=e.items)||void 0===c?void 0:c.length)-1;return(0,t.jsx)(eo,{isFirstRow:0==s,isLastRow:v,row:e,idx:s,onChangeTotalServe:n,onClickPlusMinus:o,onChangeTimeSection:r,onChangeCourse:a,onChangeProduct:d,onClickAppend:u},"".concat(null==e?void 0:e.uuid,"-").concat(i,"-").concat(s))})})})]})})});ea.displayName="MenuTable";let ed=(0,l.memo)(e=>{let{facility:i,isTableOpen:n,toggleShowTable:l}=e;return(0,t.jsxs)(I.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(_.Z,{variant:"h5",component:"p",sx:{marginRight:"8px"},children:null==i?void 0:i.name}),(0,t.jsx)(O.Z,{onClick:l,children:n?(0,t.jsx)(z.Z,{}):(0,t.jsx)(H.Z,{})})]})});ed.displayName="CompanyProfile";let eu=(0,l.memo)(e=>{let{facility:i,filteredOrderList:n,onChangeTotalServe:o,onClickPlusMinus:r,onChangeTimeSection:a,onChangeCourse:d,onChangeProduct:u,onClickAppend:s}=e,[c,v]=(0,l.useState)("auto"),m=()=>v(0===c?"auto":0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z.ZP,{item:!0,xs:12,paddingLeft:"24px",marginTop:"24px",marginBottom:"24px",children:(0,t.jsx)(ed,{facility:i,isTableOpen:"auto"==c,toggleShowTable:m})}),(0,t.jsx)(Y.Z,{duration:250,height:c,style:{width:"100%"},children:(0,t.jsx)(Z.ZP,{item:!0,xs:12,children:(0,t.jsx)(ea,{filteredOrderList:n,onChangeTotalServe:o,onClickPlusMinus:r,onChangeTimeSection:a,onChangeCourse:d,onChangeProduct:u,onClickAppend:s})})})]})});eu.displayName="Content";let es=e=>{let{filterApplied:i}=e,n=(0,b.NL)(),r=(0,o.useRouter)(),{mutate:a}=R(),{customerFacilityId:d,issueAtPeriodFrom:u,issueAtPeriodTo:s}=r.query||{},[c,v]=(0,l.useState)([]),[h,p]=(0,l.useState)([]),[x,g]=(0,l.useState)([]),[f,y]=(0,l.useState)(!1),[j,S]=(0,l.useState)(!1),[k,T]=(0,l.useState)([]),A=(0,l.useCallback)((e,i)=>{v(n=>null==n?void 0:n.map(n=>{if((null==n?void 0:n.uuid)===e){let e={...n,totalServeQtyGlobal:i,isEdited:!0};return e}return n}))},[]),q=(0,l.useCallback)(function(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v(n=>null==n?void 0:n.map(n=>{if((null==n?void 0:n.uuid)===e){let e={...n,totalServeQtyGlobal:i?parseFloat(n.totalServeQtyGlobal)+1:parseFloat(n.totalServeQtyGlobal)-1,isEdited:!0};return e}return n}))},[]),M=(0,l.useCallback)(e=>{v(i=>null==i?void 0:i.map(i=>{if((null==i?void 0:i.uuid)===e){let e=null==k?void 0:k.filter(e=>{var n;return(null==e?void 0:e.type)===(null==i?void 0:null===(n=i.timeSection)||void 0===n?void 0:n.type)}),n=null==e?void 0:e.findIndex(e=>{var n;return(null==e?void 0:e.id)===(null==i?void 0:null===(n=i.timeSection)||void 0===n?void 0:n.id)}),t=n===(null==e?void 0:e.length)-1,l={...i,timeSection:e[t?0:n+1],isEdited:!0};return l}return i}))},[k]),Y=async e=>{var i;let{data:n}=await (0,P.B7)({page:1,size:1,courseId:e}),t=null==n?void 0:null===(i=n.content)||void 0===i?void 0:i[0];return t?{id:null==t?void 0:t.id,name:null==t?void 0:t.name}:null},z=(0,l.useCallback)(async(e,i,n)=>{let t;(null==i?void 0:i.id)&&(t=await Y(null==i?void 0:i.id)),v(l=>null==l?void 0:l.map(l=>{if((null==l?void 0:l.uuid)===e){let e=[...(null==l?void 0:l.items)||[]];e[n].item.course=i,e[n].item.id=(null==t?void 0:t.id)||"",e[n].item.name=(null==t?void 0:t.name)||"";let o={...l,items:e,isEdited:!0};return o}return l}))},[]),H=(0,l.useCallback)((e,i,n)=>{v(t=>null==t?void 0:t.map(t=>{if((null==t?void 0:t.uuid)===e){let e=[...(null==t?void 0:t.items)||[]];e[n].item.id=(null==i?void 0:i.id)||"",e[n].item.name=(null==i?void 0:i.name)||"";let l={...t,items:e,isEdited:!0};return l}return t}))},[]),O=(0,l.useCallback)(e=>{v(i=>null==i?void 0:i.map(i=>{if((null==i?void 0:i.uuid)===e){let e=[...(null==i?void 0:i.items)||[],{id:null,item:{id:null,name:"",course:{}}}],n={...i,items:e,isEdited:!0};return n}return i}))},[]),G=(0,l.useCallback)(()=>{if((null==h?void 0:h.length)===0)return;let e=null==h?void 0:h.map(e=>{var i,n,t,l;return{id:null==e?void 0:e.id,requireAt:null==e?void 0:e.requireAt,timeSection:{id:null==e?void 0:null===(i=e.timeSection)||void 0===i?void 0:i.id},customerFacility:{id:null==e?void 0:null===(n=e.customerFacility)||void 0===n?void 0:n.id},totalServeQtyGlobal:parseFloat((null==e?void 0:e.totalServeQtyGlobal)||0),items:null===(t=null==e?void 0:null===(l=e.items)||void 0===l?void 0:l.filter(e=>{var i;return!C()(null==e?void 0:null===(i=e.item)||void 0===i?void 0:i.id)}))||void 0===t?void 0:t.map(e=>{var i;return{id:null==e?void 0:e.id,item:{id:null==e?void 0:null===(i=e.item)||void 0===i?void 0:i.id}}})}});S(!0),a(e,{onSuccess:async()=>{await n.refetchQueries(F.Z.adminCustomerPurchaseMenus._def),p([]),S(!1)}})},[h,a,n]),{isFetching:Q}=(0,D.g)({size:2147483647},{select:e=>{var i;return(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.content)||[]},onSuccess:e=>{T(e)}}),K={size:2147483647,...i,...{...d&&{customerFacilityId:d},...u&&{requireAtFrom:u},...s&&{requireAtTo:s}},sort:["requireAt,asc","timeSection.typeOrder,asc","timeSection.name,asc"]},{isFetching:W}=N(K,{enabled:!Q,onSuccess:e=>{var i,n;y(!1);let t=null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(n=i.content)||void 0===n?void 0:n.map(e=>({...e,uuid:(0,w.Z)()}));v(t),p([]),g((0,m.y_)(t)),y(!0)}});return(0,l.useEffect)(()=>{if((null==c?void 0:c.length)===0||!c)return;let e=null==c?void 0:c.filter(e=>null==e?void 0:e.isEdited);p(e)},[c]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z.ZP,{container:!0,xs:12,alignItems:"center",children:W||!f?(0,t.jsx)(I.Z,{sx:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",margin:"36px 0"},children:(0,t.jsx)(E.Z,{sx:{height:"auto"}})}):(null==x?void 0:x.length)>0?(0,t.jsx)(t.Fragment,{children:null==x?void 0:x.map(e=>{var i;let n=null===(i=null==c?void 0:c.filter(i=>{var n;return(null==i?void 0:null===(n=i.customerFacility)||void 0===n?void 0:n.id)===(null==e?void 0:e.id)}))||void 0===i?void 0:i.map(e=>{let i=null==h?void 0:h.findIndex(i=>(null==i?void 0:i.uuid)===(null==e?void 0:e.uuid));return i>=0?h[i]:e});return(0,t.jsx)(eu,{facility:e,filteredOrderList:n,onChangeTotalServe:A,onClickPlusMinus:q,onChangeTimeSection:M,onChangeCourse:z,onChangeProduct:H,onClickAppend:O},null==e?void 0:e.id)})}):(0,t.jsx)(I.Z,{sx:{display:"flex",justifyContent:"center",width:"100%",marginTop:"20px"},children:(0,t.jsx)(_.Z,{sx:{mb:6,color:"text.secondary"},children:"「該当する品目はありません。」"})})}),(0,t.jsx)(L.Z,{onClick:G,disabled:j})]})};var ec=n(18055),ev=n(7323),em=n(66242),eh=n(44267),ep=n(78445);let ex=()=>{var e,i;let n=(0,o.useRouter)(),{customerId:r,customerFacilityId:d}=n.query||{},[u,s]=(0,l.useState)({requireAtFrom:(0,m.ec)(m.cB),requireAtTo:(0,m.ec)(m.Kd)}),c=e=>{var i;let n=(0,m.ec)(null==e?void 0:e.requireAtFrom),t=(0,m.ec)(null==e?void 0:e.requireAtTo),l=a()({...e,requireAtFrom:n,requireAtTo:t,customerFacilityId:null==e?void 0:null===(i=e.customerFacility)||void 0===i?void 0:i.id},e=>!!e)||{};(null==l?void 0:l.customerFacility)&&(null==l||delete l.customerFacility),s(l)},{data:v}=(0,ec.Dq)(r,{enabled:!!r});null==v||null===(e=v.data)||void 0===e||e.name;let{data:h}=(0,ev.G9)(d,{enabled:!!d});return null==h||null===(i=h.data)||void 0===i||i.name,(0,t.jsx)(Z.ZP,{container:!0,spacing:6,children:(0,t.jsx)(Z.ZP,{item:!0,xs:12,children:(0,t.jsxs)(em.Z,{children:[(0,t.jsx)(ep.Z,{title:"献立メニュー注文一覧"}),(0,t.jsxs)(eh.Z,{sx:{p:0,"&:last-child":{pb:0}},children:[(0,t.jsx)(j,{customerFacility:null==h?void 0:h.data,customerFacilityId:d,handleSetFilterApplied:c}),(0,t.jsx)(es,{filterApplied:u})]})]})})})};var eg=ex}},function(e){e.O(0,[3662,8360,7851,8271,2288,6682,6261,6644,7064,3863,7206,1789,5593,7727,6752,9774,2888,179],function(){return e(e.s=45201)}),_N_E=e.O()}]);